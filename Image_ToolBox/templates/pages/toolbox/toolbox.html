{% extends 'pages/toolbox_base.html' %}
{% load static %}

<!-- Page Title -->
{% block title %}ToolBox | Elsherbiniy ImageBox{% endblock title %}

<!-- Current Page Style -->
{% block currentPageStyles %}

    <link rel="stylesheet" type="text/css" href="{% static 'css/forms/theme-checkbox-radio.css' %}">
    <!-- <link rel="stylesheet" type="text/css" href="{% static 'plugins/jquery-ui/jquery-ui.min.css' %}" /> -->

    <link href="{% static 'plugins/animate/animate.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/components/custom-modal.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'plugins/file-upload/file-upload-with-preview.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'plugins/noUiSlider/nouislider.min.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'plugins/noUiSlider/custom-nouiSlider.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'plugins/bootstrap-range-Slider/bootstrap-slider.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'plugins/apex/apexcharts.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'css/forms/theme-checkbox-radio.css' %}" rel="stylesheet" type="text/css">

    <style type="text/css">
        /* START OF GENERAL CONTROLS */
        ::-webkit-scrollbar {
          width: 5px;
          height: 5px;
        }
        ::-webkit-scrollbar-thumb {
          background: #888;
          border-radius: 20px;
        }
        ::-webkit-scrollbar-thumb:hover {
          background: #1abc9c;
        }

        .card{
            box-shadow: 10px 10px 10px #f2f2f2;
        }
        
        /* Conversion Wait message */
        .color_conversion_model{
            transition: all 0.3s ease-in-out;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
        }
        .color_conversion_model span{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 18px;
            font-weight: 700;
        }

        /* Histogram Card */
        .Histogram-canvas,
        .image-cut-select-canvas{
            transition: all 0.3s ease-in-out;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
        }

        .Histogram-canvas .card,
        .image-cut-select-canvas .card{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 80%;
        }
        .Histogram-canvas .card .card-header,
        .image-cut-select-canvas .card .card-header{
            display: flex;
            flex-wrap: nowrap;
            align-content: space-between;
            justify-content: space-between;
            align-items: center;
        }

        .Histogram-canvas .card .card-header .hist-title span,
        .Histogram-canvas .card .card-header .hist-controls span,
        .image-cut-select-canvas .card .card-header .image-cut-title span{
            font-size: 18px;
        }
        .Histogram-canvas .card .card-header .hist-controls span{
            display: inline-block;
            margin-right: 10px;
        }
        .Histogram-canvas .card .card-header .hist-controls select{
            padding: 5px 10px;
            border: 0;
            border-radius: 5px;
        }
        .Histogram-canvas .card .card-header .hist-controls .btn,
        .image-cut-select-canvas .card .card-header .image-cut-controls .btn{
            padding: 3px 10px;
        }

        .Histogram-canvas .card .card-body{
            overflow-x: scroll;
            padding: 20px;
        }
        .Histogram-canvas .card .chart{
            width: 100%;
            height: 100%;
        }

        /* IMAHE SELECT PANAL STYLE */
        .image-cut-select-canvas .card .card-body{
            display: flex;
            justify-content: space-between;
            overflow: hidden;
        }
        .image-cut-select-canvas .card .card-body .image-container{
            height: 100%;
            width: 70%;
            background-color: #060a11;
            overflow: scroll;
            padding: 10px;
            position: relative;
        }
        .image-cut-select-canvas .card .card-body .image-container img{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container{
            height: 100%;
            width: 28%;
            padding-top: 20px;
            overflow-y: scroll;
            position: relative;
        }
        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .effect-box-options-box-container{
            width: 100%;
            position: relative;
            padding: 25px 10px 10px 10px;
            border: 3px solid #10ab9b;
            border-radius: 5px;
        }

        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .effect-box-options-box-container .box-title{
            position: absolute;
            top: -20px;
            left: 20px;
            background-color: #10ab9b;
            padding: 5px 10px;
            color: #fff;
            font-size: 16px;
            font-weight: 700;
            border-radius: 5px;
        }

        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .effect-box-options-box-container .box-options .row{
            margin: 0;
        }
        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .effect-box-options-box-container .box-options .row .box-options-option{
            padding: 5px;
            border: 1px solid #10ab9b;
            text-align: center;
            border-radius: 5px;
            color: #10ab9b;
            font-size: 20px;
            cursor: pointer;
        }
        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .effect-box-options-box-container .box-options .row .box-options-option:hover{
            background-color: #10ab9b;
            color: #fff;
        }

        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .effect-box-options-box-container .box-options .row .box-options-option span svg path {
            fill: #10ab9b;
        }

        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .effect-box-options-box-container .box-options .row .box-options-option:hover span svg path{
            fill: #fff;
        }

        .image-cut-select-canvas .card .card-body .cut-image-effect-box-container .zoom-controls{
            position: absolute;
            bottom: 0;
            width: 100%;
        }

        /* Effect setting panal */
        .effect-setting-panel{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;
            width: 200px;
            min-height: 100px;
            background-color: #fff;
            border-radius: 10px;
        }
        .effect-setting-panel .effect-setting-panel-header{
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            min-height: 20px;
            padding: 10px;
            background-color: #0e1726;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 10px 10px 0px 0px;
            cursor: move;
            color: #fff;
        }
        .effect-setting-panel .effect-setting-panel-body{
            margin-top: 50px;
            padding: 10px;
        }

        .effect-setting-panel .effect-setting-panel-body span{
            text-align: center;
            display: block;
        }
        .effect-setting-panel .effect-setting-panel-body span.icon-title{
            font-size: 14px;
            margin-top: 5px;
        }

        .effect-setting-panel .effect-setting-panel-header .close{
            cursor: pointer;
        }
        .effect-setting-panel .effect-setting-panel-header .close:hover{
            color: #f44336;
        }

        /* Flip panal style */
        .effect-setting-panel .effect-setting-panel-body span.flip-icon{
            padding: 5px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 1px 1px 1px 1px #f1f1f1;
            cursor: pointer;

        }

        /* Skew Panal Styles */
        .skew-selection-box {   
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        .skew-selection-box .clip-box{
            clip-path: polygon(0 0, 0 0, 0 0, 0 0);
            border: 2px solid #009688;
            background-color: rgba(0, 150, 136, 0.5);
            display: none;
            cursor: move;
            position: relative;
        }

        #skew-setting-box .form-group label,
        #translate-setting-box .form-group label{
            color: #333;
            font-size: 12px;
        }
        #skew-setting-box  .form-control,
        #translate-setting-box .form-control{
            background-color: #fff;
            font-size: 14px;
            padding: 5px;
            height: auto;
            border: 1px solid #1b2e4b;
            border-radius: 5px;
            color: #222;
            margin-bottom: 10px;
        }

        #skew-setting-box .skew-sections-titles{
            display: block;
            text-align: left;
            font-size: 16px;
            color: #000;
            font-weight: 700;
            text-transform: uppercase;
        }

        .skew-selection-box .clip-box .skew-controller{
            position: absolute;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #009688;
        }

        .skew-selection-box .clip-box .skew-controller.top-left-controller{
            top: -5px;
            left: -5px;
        }
        .skew-selection-box .clip-box .skew-controller.top-right-controller{
            top: -5px;
            right: -5px;
        }
        .skew-selection-box .clip-box .skew-controller.bottom-right-controller{
            bottom: -5px;
            right: -5px;
        }
        .skew-selection-box .clip-box .skew-controller.bottom-left-controller{
            bottom: -5px;
            left: -5px;
        }

        /* Blinding Styles */
        .new-control.new-radio{
            color: #333 !important;
        }

        .blending_persentage{
            margin-bottom: 5px;
        }
        .blending_persentage .select_box_label span,
        .choose_image_container .choose_image_label span{
            display: block !important;
            text-align: left !important;
            color: #1b2e4b !important;
        }

        .choose_image_container .form-control{
            height: auto;
            padding: 5px;
            position: relative;
            border: 0;
            padding-left: 105px;
        }

        .choose_image_container .form-control::-webkit-file-upload-button{
            background-color: #20c997;
            border: 0;
            padding: 5px 10px;
            border-radius: 4px;
            position: absolute;
            top: 0;
            left: 0px;
            color: #fff;
        }
        .choose_image_container.new_blending_image .form-control::-webkit-file-upload-button{
            background-color: #dc3545;
        }

        .blending_persentage .select_blending_persentage,
        .select_bitplan_plan{
            display: block;
            margin-top: 5px;
            padding: 5px 10px;
            width: 100%;
            border: 0;
            border-radius: 5px;
            background-color: #1b2e4b;
            color: #fff;
            margin-bottom: 10px;
        }  

        /* Power Transformation styles */
        #power-setting-box .effect-setting-panel-body span,
        #threshold-setting-box .effect-setting-panel-body span,
        .internal-sections-titles{
            display: block;
            text-align: left;
            font-size: 16px;
            color: #000;
            font-weight: 700;
            text-transform: uppercase;
        }

        #power-setting-box .form-group .form-control,
        #threshold-setting-box .form-group .form-control{
            background-color: #fff;
            font-size: 14px;
            padding: 5px;
            height: auto;
            border: 1px solid #1b2e4b;
            border-radius: 5px;
            color: #222;
            margin-bottom: 10px;
        }

        /* Setting box general style */
        .internal-sections-titles{
            display: block !important;
            text-align: left !important;
            font-size: 16px !important;
            color: #000 !important;
            font-weight: 700 !important;
            text-transform: uppercase !important;
        }

        .internal-section-label{
            color: #333 !important;
            font-size: 12px !important;
        }

        .internal-section-input{
            background-color: #fff !important;
            font-size: 14px !important;
            padding: 5px !important;
            height: auto !important;
            border: 1px solid #1b2e4b !important;
            border-radius: 5px !important;
            color: #222 !important;
            margin-bottom: 10px !important;

        }

        /* Crop box style */
        .image-crop-box{
            position: absolute;
            top: 0;
            left: 0;
            width: 50px;
            height: 50px;
            background-color: rgba(0, 150, 136, 0.5);
            border: 2px solid #009688;
            display: none;
        }
        .select_zooming_scale{
            display: block;
            margin-top: 5px;
            padding: 5px 10px;
            width: 100%;
            border: 0;
            border-radius: 5px;
            background-color: #1b2e4b;
            color: #fff;
            margin-bottom: 10px;
        }
        /* END OF GENERAL CONTROLS */

        /* START OF HEADER STYLE */
        .page-header{
            position: fixed;
            top: 0;
            left: 0;
            padding: 10px 30px 10px 30px;
            width: 100%;
            margin-top: 0;
        }

        .footer-wrapper{
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #fff;
        }
        /* END OF HEADER STYLE */

        /* Fast controls navbar */
        .fast-controls-container{
            position: absolute;
            top: 50%;
            left: 0;
            transform: translate(0, -50%);
            padding: 10px;
            border: 0px solid #03a9f4;
            border-radius: 0 10px 10px 0;
            z-index: 11;
        }

        .fast-controls-container .fast-controls-option{
            border: 0px solid #03a9f4;
            border-radius: 5px;
            padding: 10px;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .fast-controls-container .fast-controls-option span:hover{
            color: #1abc9c;
        }

        .fast-controls-container .active-option{
            color: #fff;
            background-color: #1abc9c;;
        }
        .fast-controls-container .active-option span:hover{
            color: #fff;
        }
        /* END Fast controls navbar */


        /* START OF WORKING AREA  */
        .work-area-container{
            width: 100%;
            height: calc(100vh - 59px);
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translate(-50%, 0);
            display: flex;
        }
        .work-area-container .image-side{
            position: relative;
            width: 80%;
            height: calc(100% - 150px);
        }
        .work-area-container .configurations-side{
            width: 20%;
            height: calc(100% - 150px);
            border-width: 0;
            box-shadow: -10px 10px 10px #f2f2f2;
            border-radius: 0;
            padding: 10px 20px;
            overflow-y: scroll;
        }
        .work-area-container .history-side{
            width: 100%;
            height: 150px;
            position: absolute;
            bottom: 0;
            left: 0;
            border-width: 0;
            border-radius: 0;
            padding: 20px;
        }

        /* --- Image Side */
        .work-area-container .image-side .current-work-image{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            min-height: 50px;
            max-height: 90%;
            overflow: scroll;
        }
        /* --- End of image side */

        /* --- Start of configurations side */
        .work-area-container .configurations-side .current-image-details{
            margin-top: 10px;
        }
        .work-area-container .section-title{
            text-transform: uppercase;
        }
        .work-area-container .configurations-side .current-image-details .px-value{
            font-weight: 600;
            font-size: 18px;
        }

        .current-effect-controls .no-effect-selected,
        .current-effect-options-container .no-options-selected{
            text-align: center;
        }
        
        .current-effect-controls .no-effect-selected span,
        .current-effect-options-container .no-options-selected span{
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .current-effect-controls .effect-option{
            padding: 10px;
            box-shadow: none !important;
            border: 2px solid #1abc9c !important;
            align-items: center;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
            color: #1abc9c;
        }
        .current-effect-controls .effect-option span{
            display: inline-block;
        }

        .current-effect-controls .effect-option span:first-child{
            margin-bottom: 10px;
        }
        .current-effect-controls .effect-option span:last-child{
            font-size: 16px;
            font-weight: 700;
        }
        .current-effect-controls .effect-option:hover{
            background-color: #1abc9c;
            color: #fff;
            box-shadow: 4px 4px 6px 2px #1abc9c61 !important;
        }

        .current-effect-options-container .effect-option-title{
            display: inline-block;
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            position: absolute;
        }

        /* --- End of configurations side */

        /* ---- START OF HISTORY SIDE */
        .work-area-container .history-side .section-title{
            font-size: 16px;
        }
        .work-area-container .history-side .section-header{
            position: absolute;
            top: -30px;
            left: 20px;
            padding: 10px 40px;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            box-shadow: none !important;

        }
        .work-area-container .history-side .history-side-image-container{
            width: 100%;
            height: 100%;
            background-color: #060818;
            border-radius: 5px;
            overflow-y: scroll;
            padding: 5px;
        }
        .work-area-container .history-side .history-side-image-container .history-card-image{
            display: inline-block;
            height: 100%;
            width: auto;
            overflow: hidden;
            cursor: pointer;
            margin-right: 5px;
            margin-left: 5px;
            padding: 2px;
            border-radius: 5px;
            border-width: 0;
        }
        .work-area-container .history-side .history-side-image-container .history-card-image img{
            height: 100%;
        }
        
        /* ---- END OF HISTORY SIDE */
        /* END OF WORKING AREA */

        /* START OF WOEK IMAGE STYLE */
        .work-image-container{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 80%;
            min-height: 50px;
            max-height: 80%;
            border-radius: 10px;
            border-width: 0;
            padding: 10px;

        }
        .work-image-container .add-image-form{
            padding: 20px;
        }

        .work-image-container .custom-file-container__image-clear{
            float: right;
            background-color: #1abc9c;
            color: #fff !important;
            padding: 5px 13px;
            border-radius: 5px;
            display: inline-block;
            font-size: 14px !important;
            font-weight: 600 !important;
        }

        .work-image-container .btn-icon{
            display: inline-block;
            margin-left: 10px;
        }

        /* END OF WOEK IMAGE STYLE */

    </style>

    <style class="dark-theme">
        .apexcharts-canvas {
            margin: 0 auto;
        }

        .apexcharts-title-text {
            fill: #e0e6ed;
        }
        .apexcharts-yaxis-label {
            fill: #e0e6ed;
        }
        .apexcharts-xaxis-label {
            fill: #e0e6ed;
        }
        .apexcharts-legend-text {
            color: #e0e6ed!important;
        }
        .apexcharts-radialbar-track.apexcharts-track .apexcharts-radialbar-area {
            stroke: #191e3a;
        }
        .apexcharts-pie-label, .apexcharts-datalabel, .apexcharts-datalabel-label, .apexcharts-datalabel-value {
            fill: #bfc9d4;
        }
    </style>

{% endblock currentPageStyles %}


<!-- Body Content-->
{% block body %}

    {% csrf_token %}
    <!-- Section Title and Theme control -->
    <div class="page-header header-container">
        
        <!-- Navigation data -->
        <nav class="breadcrumb-one" aria-label="breadcrumb">
            <div class="title">
                <h3>{{Project.Project_Name}}</h3>
            </div>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'toolbox_home' %}">All Projects</a></li>
                <li class="breadcrumb-item active"  aria-current="page"><a href="javascript:void(0);">{{Project.Project_Name}}</a></li>
            </ol>
        </nav>

        <!-- Right side data -->
        <div class="toggle-switch" style="align-items: flex-start;">
            
            <!-- Change theme button -->
            <label class="switch s-icons s-outline  s-outline-secondary">
                <input type="checkbox" checked="" class="theme-shifter">
                <span class="slider round">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>

                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                </span>
            </label>

        </div>
    </div>


    {% if Images %}
        <!-- Side navbar [Fast COntrols] -->
        <div class="card fast-controls-container">
            
            <!-- Convert to gray -->
            <div class="card fast-controls-option" title="Convert image" id='convert-image'>
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-codesandbox"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="7.5 4.21 12 6.81 16.5 4.21"></polyline><polyline points="7.5 19.79 7.5 14.6 3 12"></polyline><polyline points="21 12 16.5 14.6 16.5 19.79"></polyline><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></span>
            </div>

            <!-- Transformation tools -->
            <div class="card fast-controls-option" title="Transformation tools" id='transformation-tools'>
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sliders"><line x1="4" y1="21" x2="4" y2="14"></line><line x1="4" y1="10" x2="4" y2="3"></line><line x1="12" y1="21" x2="12" y2="12"></line><line x1="12" y1="8" x2="12" y2="3"></line><line x1="20" y1="21" x2="20" y2="16"></line><line x1="20" y1="12" x2="20" y2="3"></line><line x1="1" y1="14" x2="7" y2="14"></line><line x1="9" y1="8" x2="15" y2="8"></line><line x1="17" y1="16" x2="23" y2="16"></line></svg></span>
            </div>

            <!-- Histogram -->
            <div class="card fast-controls-option" title="Histogram" id="image-histogram">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bar-chart-2"><line x1="18" y1="20" x2="18" y2="10"></line><line x1="12" y1="20" x2="12" y2="4"></line><line x1="6" y1="20" x2="6" y2="14"></line></svg></span>
            </div>

            <!-- Image Brightness -->
            <div class="card fast-controls-option" title="Image brightness" id="image-brightness">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></span>
            </div>

            <!-- Select part of image -->
            <div class="card fast-controls-option" title="Select" id="image-select">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pen-tool"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg></span>
            </div>
            
            <!-- LP Filters -->
            <div class="card fast-controls-option" title="Low pass filters" id="image-LP-filters">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-filter"><polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon></svg></span>
            </div>

            <!-- Edge Detection Filters -->
            <div class="card fast-controls-option" title="Edge Detection Filters" id="image-HP-filters">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-copy"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></span>
            </div>

            <!-- Save and Exit Icon  -->
            <div class="card fast-controls-option" title="Save and exit" data-toggle="modal" data-target="#save_project_and_exit">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-log-in"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg></span>
            </div>
        </div>
        <!-- END OF Side navbar [Fast COntrols] -->
    {% endif %}

    

        <!-- work image -->
        {% if not Images %}
            <div class="card work-image-container" {% if not Images %} style="width: 80%" {% endif %}>
                
                <!-- Add Image Form -->
                <div class="add-image-form">
                    <form action="{% url 'add_work_image' project_id=Project.id %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <!-- upload input  -->
                        <div class="custom-file-container" data-upload-id="addWorkImage">
                            <label style="display: block; font-size: 20px; font-weight: 700; text-transform: uppercase;">Upload image <a href="javascript:void(0)" class="custom-file-container__image-clear" title="Clear Image">x</a></label>
                            <label class="custom-file-container__custom-file" >
                                <input name="Image" id="id_Image" type="file" class="custom-file-container__custom-file__custom-file-input" accept="image/*" required>
                                <input type="hidden" name="MAX_FILE_SIZE" value="10485760" />
                                <span class="custom-file-container__custom-file__custom-file-control"></span>
                            </label>
                            <div class="custom-file-container__image-preview"></div>
                        </div>

                        <!-- Upload Button -->
                        <button style="float: right;" type="submit" class="btn btn-success mb-2">upload <span class="btn-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-upload-cloud"><polyline points="16 16 12 12 8 16"></polyline><line x1="12" y1="12" x2="12" y2="21"></line><path d="M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"></path><polyline points="16 16 12 12 8 16"></polyline></svg></span></button>

                    </form>
                </div>
            </div>
        {% else %}

            <!-- Work Area -->
            <div class="work-area-container">
                
                <!-- CURRENT WORK AREA -->
                <div class="image-side">

                    <!-- current work image -->
                    <div class="current-work-image">
                        <img id="current-image" image_id="{{current_image.id}}" src="{{current_image.Image.url}}">

                        <!-- Skew selector -->
                        <div class="skew-selection-box">
                            <div class="clip-box">
                                <span class="top-left-controller skew-controller"></span>
                                <span class="top-right-controller skew-controller"></span>
                                <span class="bottom-right-controller skew-controller"></span>
                                <span class="bottom-left-controller skew-controller"></span>
                            </div>
                        </div>

                        <!-- Crop Box -->
                        <div class="image-crop-box"></div>

                    </div>
                    <!-- END OF current image -->
                    
                </div>
                <!-- END OF CURRENT WORK AREA -->

                <!-- Start of configuration section -->
                <div class="configurations-side card">
                    
                    <!-- START OF Current image details -->
                    <div class="current-image-details">
                        <div class="row">

                            <!-- SECTION TITLE -->
                            <div class="col-md-12 mb-2">
                                <h4 class="section-title">Image Details</h4>
                            </div>

                            <!-- IMAGE WIDTH -->
                            <div class="col-md-4 mb-3">
                                <span>Width</span>
                                <div>
                                    <span><span id="image_width" class="px-value">{{current_image.current_image_width}}</span> px</span>
                                </div>
                            </div>

                            <!-- IMAGE HEIGHT -->
                            <div class="col-md-4 mb-3">
                                <span>Height</span>
                                <div>
                                    <span><span id="image_height" class="px-value">{{current_image.current_image_height}}</span> px</span>
                                </div>
                            </div>

                            <!-- IMAGE FORMAT -->
                            <div class="col-md-4 mb-3">
                                <span>Format</span>
                                <div>
                                    <span id="image_format" class="px-value">{% if current_image.current_image_format == 1 %} GRAY {% elif current_image.current_image_format == 2 %} HSV {% else %} RGB {% endif %}</span>
                                </div>
                            </div>

                            <!-- IMAGE MINIMUM INTINISTY -->
                            <div class="col-md-6 mb-3">
                                <span>Min-Intensity</span>
                                <div>
                                    <span id="image_min_intinisty" class="px-value">{{current_image.current_image_Min_intensity}}</span>
                                </div>
                            </div>

                            <!-- IMAGE MAXIMUM INTINISTY -->
                            <div class="col-md-6 mb-3">
                                <span>Max-Intensity</span>
                                <div>
                                    <span id="image_max_intinisty" class="px-value">{{current_image.current_image_Max_intensity}}</span>
                                </div>
                            </div>

                        </div>
                    </div>
                    <!-- END OF Current image details -->

                    <!-- START OF CURRENT EFFECT CONTROLS -->
                    <div class="current-effect-controls">
                        
                        <div class="row">
                            <!-- SECTION TITLE -->
                            <div class="col-md-12 mt-2">
                                <h4 class="section-title effect-title">effect settings</h4>
                            </div>
                        </div>

                        <div class="row effects-container">

                        
                            <!-- NO EFFECT SELLECTED -->
                            <div class="col-md-12 mt-2 no-effect-selected">
                                <span>no effect selected</span>
                            </div>

                        </div>
                    </div>
                    <!-- END OF CURRENT EFFECT CONTROLS -->

                    <!-- START OF CURRENT EFFECT CONTROLS -->
                    <div class="current-effect-options-container mt-2">
                        
                        <div class="row">
                            <!-- SECTION TITLE -->
                            <div class="col-md-12 mt-2">
                                <h4 class="section-title effect-title-color-option">Color Options</h4>
                            </div>
                        </div>

                        <div class="row current-effects-options">

                        
                            <!-- NO EFFECT SELLECTED -->
                            <!-- <div class="col-md-12 mt-2 no-options-selected">
                                <span>no options</span>
                            </div> -->

                            {% if current_image.current_image_format == 0 %}

                                <!-- RED Sliders -->
                                <div class="col-md-12 red-controls mb-2">

                                    <!-- Slider -->
                                    <div class="custom-progress top-right progress-up" style="width: 100%">
                                        <!-- Slider name -->
                                        <span class="effect-option-title">RED</span>
                                        <div class="range-count red-slider-counter"><span class="range-count-number" data-rangecountnumber="{{RED_VALUE}}">{{RED_VALUE}}</span></div>
                                        <input id="red-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="{{RED_VALUE}}">
                                    </div>

                                </div>

                                <!-- GREEN Sliders -->
                                <div class="col-md-12 green-controls mb-2">

                                    <!-- Slider -->
                                    <div class="custom-progress top-right progress-up" style="width: 100%">
                                        <!-- Slider name -->
                                        <span class="effect-option-title">green</span>
                                        <div class="range-count green-slider-counter"><span class="range-count-number" data-rangecountnumber="{{GREEN_VALUE}}">{{GREEN_VALUE}}</span></div>
                                        <input id="green-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="{{GREEN_VALUE}}">
                                    </div>

                                </div>

                                <!-- BLUE Sliders -->
                                <div class="col-md-12 blue-controls mb-2">

                                    <!-- Slider -->
                                    <div class="custom-progress top-right progress-up" style="width: 100%">
                                        <!-- Slider name -->
                                        <span class="effect-option-title">blue</span>
                                        <div class="range-count blue-slider-counter"><span class="range-count-number" data-rangecountnumber="{{BLUE_VALUE}}">{{BLUE_VALUE}}</span></div>
                                        <input id="blue-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="{{BLUE_VALUE}}">
                                    </div>

                                </div>
                            {% elif current_image.current_image_format == 1 %}
                                <!-- Gray Sliders -->
                                <div class="col-md-12 gray-controls mb-2">

                                    <!-- Slider -->
                                    <div class="custom-progress top-right progress-up" style="width: 100%">
                                        <!-- Slider name -->
                                        <span class="effect-option-title">GRAY</span>
                                        <div class="range-count gray-slider-counter"><span class="range-count-number" data-rangecountnumber="{{GRAY_VALUE}}">{{GRAY_VALUE}}</span></div>
                                        <input id="gray-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="{{GRAY_VALUE}}">
                                    </div>

                                </div>
                            {% elif current_image.current_image_format == 2 %}
                                <!-- Hue Sliders -->
                                <div class="col-md-12 hue-controls mb-2">

                                    <!-- Slider -->
                                    <div class="custom-progress top-right progress-up" style="width: 100%">
                                        <!-- Slider name -->
                                        <span class="effect-option-title">HUE</span>
                                        <div class="range-count hue-slider-counter"><span class="range-count-number" data-rangecountnumber="{{HUE_VALUE}}">{{HUE_VALUE}}</span></div>
                                        <input id="hue-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="{{HUE_VALUE}}">
                                    </div>

                                </div>

                                <!-- Saturation Sliders -->
                                <div class="col-md-12 saturation-controls mb-2">

                                    <!-- Slider -->
                                    <div class="custom-progress top-right progress-up" style="width: 100%">
                                        <!-- Slider name -->
                                        <span class="effect-option-title">SATURATION</span>
                                        <div class="range-count saturation-slider-counter"><span class="range-count-number" data-rangecountnumber="{{SATURATION_VALUE}}">{{SATURATION_VALUE}}</span></div>
                                        <input id="saturation-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="{{SATURATION_VALUE}}">
                                    </div>

                                </div>

                                <!-- Value Sliders -->
                                <div class="col-md-12 value-controls mb-2">

                                    <!-- Slider -->
                                    <div class="custom-progress top-right progress-up" style="width: 100%">
                                        <!-- Slider name -->
                                        <span class="effect-option-title">VALUE</span>
                                        <div class="range-count value-slider-counter"><span class="range-count-number" data-rangecountnumber="{{VALUE_VALUE}}">{{VALUE_VALUE}}</span></div>
                                        <input id="value-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="{{VALUE_VALUE}}">
                                    </div>

                                </div>
                            {% endif %}

                        </div>
                    </div>
                    <!-- END OF CURRENT EFFECT CONTROLS -->


                </div>
                <!-- End of configuration section -->

                <!-- START OF HISTORY SIDE -->
                <div class="history-side card">
                    
                    <!-- HISTORY SIDE HEADER -->
                    <div class="card section-header">
                        <!-- SECTION TITLE -->
                        <div class="section-header-tab">
                            <h4 class="section-title">history</h4>
                        </div>
                    </div>
                    <!-- END OF HISTORY SIDE HEADER -->

                    <!-- HISTORY SIDE IMAGES -->
                    <div class="history-side-image-container" id="history-data-images">
                        
                        {% for image in Images %}

                        <!-- CARD IMAGE -->
                        <div class="history-card-image">
                            <img image_id="{{image.id}}" src="{{image.Image.url}}">
                        </div>

                        {% endfor %}

                    </div>
                    <!-- END OF HISTORY SIDE IMAGES -->

                </div>
                <!-- END OF HISTORY SIDE -->

            </div>

        {% endif %}
        <!-- END OF work image -->


        <!-- START Conversion messages -->
        <div class="color_conversion_model">
            <span> We are processing the image ... please wait.</span>
        </div>
        <!-- END Conversion messages -->

        <!-- Histogram Canvas -->
        <div class="Histogram-canvas">
            <div class="card">
                <div class="card-header">
                    <div class="hist-title">
                        <span>Histogram</span>
                    </div>
                    <div class="hist-controls">
                        
                        <!-- Zoom control -->
                        <span>Zoom </span>
                        <select id="card-body-zoom-value">
                            <option value="100">100%</option>
                            <option value="200">200%</option>
                            <option value="300">300%</option>
                            <option value="400">400%</option>
                            <option value="500">500%</option>
                        </select>

                        <!-- exit Button -->
                        <button class="btn btn-danger" id="close-histogram-card">X</button>
                    </div>

                </div>
                <div class="card-body">
                    <div class="chart" id="Histogram-canvas"></div>      
                </div>
                
            </div>
        </div>
        <!-- END Histogram Canvas -->
        

        <!-- START OF SELECT PANAL -->
        <div class="image-cut-select-canvas">
            <div class="card">
                <div class="card-header">
                    <div class="image-cut-title">
                        <span>Image Selection</span>
                    </div>
                    <div class="image-cut-controls">
                        <!-- exit Button -->
                        <button class="btn btn-danger" id="close-image-cut-select-canvas">X</button>
                    </div>
                </div>
                <div class="card-body">
                    
                    <!-- IMAGE SIDE -->
                    <div class="image-container">
                        <img id="current-image" image_id="{{current_image.id}}" src="{{current_image.Image.url}}">
                    </div>

                    <!-- TOOLS SIDE -->
                    <div class="cut-image-effect-box-container">

                        <!-- [1] Transformations -->
                        <div class="effect-box-options-box-container">

                            <div class="box-title">
                                <span>Transformations</span>
                            </div>

                            <div class="box-options">
                                <div class="row">
                                    
                                    <!-- ROTATE -->
                                    <div class="col-md-3">
                                        <div id="selected-cut-image-rotate" class="box-options-option" title="ROTATE">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                                        </div>
                                    </div>

                                    <!-- FLIP VERTICAL -->
                                    <div class="col-md-3">
                                        <div class="box-options-option" title="FLIP Y">
                                            <span id="flip-cut-image" flip="X" class="flip-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" height="24" viewBox="0 0 24 24" width="24"><path d="M17.1334 3.85537C17.3607 3.99056 17.5001 4.2355 17.5001 4.5V10.75C17.5001 11.1642 17.1643 11.5 16.7501 11.5H5.25007C4.90702 11.5 4.6077 11.2672 4.52318 10.9348C4.43867 10.6023 4.59052 10.2548 4.89194 10.091L16.3919 3.84103C16.6243 3.71473 16.9061 3.72018 17.1334 3.85537ZM8.20071 10H16.0001V5.76122L8.20071 10Z" fill="#212121"/><path d="M17.5001 19.5C17.5001 19.7645 17.3607 20.0094 17.1334 20.1446C16.9061 20.2798 16.6243 20.2853 16.3919 20.159L4.89194 13.909C4.59052 13.7452 4.43867 13.3977 4.52318 13.0652C4.6077 12.7328 4.90702 12.5 5.25007 12.5H16.7501C17.1643 12.5 17.5001 12.8358 17.5001 13.25V19.5Z" fill="#212121"/></svg></span>
                                        </div>
                                    </div>

                                    <!-- FLIP HORIZONTAL -->
                                    <div class="col-md-3">
                                        <div class="box-options-option" title="FLIP X">
                                            <span id="flip-cut-image" flip="Y" class="flip-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" height="24" viewBox="0 0 24 24" width="24"><path d="M4.5 17.5001C4.2355 17.5001 3.99056 17.3607 3.85537 17.1334C3.72018 16.9061 3.71473 16.6243 3.84103 16.3919L10.091 4.89194C10.2548 4.59052 10.6023 4.43867 10.9348 4.52318C11.2672 4.6077 11.5 4.90702 11.5 5.25007V16.7501C11.5 17.1643 11.1642 17.5001 10.75 17.5001H4.5Z" fill="#212121"/><path d="M20.1446 17.1334C20.0094 17.3607 19.7645 17.5001 19.5 17.5001H13.25C12.8358 17.5001 12.5 17.1643 12.5 16.7501V5.25007C12.5 4.90702 12.7328 4.6077 13.0652 4.52318C13.3977 4.43867 13.7452 4.59052 13.909 4.89194L20.159 16.3919C20.2853 16.6243 20.2798 16.9061 20.1446 17.1334ZM14 8.20071V16.0001H18.2388L14 8.20071Z" fill="#212121"/></svg></span>
                                        </div>
                                    </div>

                                    <!-- FLIP XY -->
                                    <div class="col-md-3">
                                        <div class="box-options-option" title="FLIP XY">
                                            <span id="flip-cut-image" flip="XY" class="flip-icon" style="transform: rotate(270deg); display: block;"><svg xmlns="http://www.w3.org/2000/svg" fill="none" height="24" viewBox="0 0 24 24" width="24"><path d="M17.1334 3.85537C17.3607 3.99056 17.5001 4.2355 17.5001 4.5V10.75C17.5001 11.1642 17.1643 11.5 16.7501 11.5H5.25007C4.90702 11.5 4.6077 11.2672 4.52318 10.9348C4.43867 10.6023 4.59052 10.2548 4.89194 10.091L16.3919 3.84103C16.6243 3.71473 16.9061 3.72018 17.1334 3.85537ZM8.20071 10H16.0001V5.76122L8.20071 10Z" fill="#212121"/><path d="M17.5001 19.5C17.5001 19.7645 17.3607 20.0094 17.1334 20.1446C16.9061 20.2798 16.6243 20.2853 16.3919 20.159L4.89194 13.909C4.59052 13.7452 4.43867 13.3977 4.52318 13.0652C4.6077 12.7328 4.90702 12.5 5.25007 12.5H16.7501C17.1643 12.5 17.5001 12.8358 17.5001 13.25V19.5Z" fill="#212121"/></svg></span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <!-- [2] LP Filters -->
                        <div class="effect-box-options-box-container mt-5">

                            <div class="box-title">
                                <span>Smoothing Filters</span>
                            </div>

                            <div class="box-options">
                                <div class="row">
                                    
                                    <!-- AVarage Filter -->
                                    <div class="col-md-4 mt-3">
                                        <div id="cut_image_select_avarage_filter" class="box-options-option" title="Avarage Filter">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg></span>
                                        </div>
                                    </div>

                                    <!-- Gaussian FIlter -->
                                    <div class="col-md-4 mt-3">
                                        <div id="cut_image_select_gaussian_filter"  class="box-options-option" title="Gaussian FIlter">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-droplet"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path></svg></span>
                                        </div>
                                    </div>

                                    <!-- Circular FIlter -->
                                    <div class="col-md-4 mt-3">
                                        <div id="cut_image_select_circular_filter"  class="box-options-option" title="Circular FIlter">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crosshair"><circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line></svg></span>
                                        </div>
                                    </div>

                                    <!-- Cone Filter -->
                                    <div class="col-md-4 mt-3">
                                        <div id="cut_image_select_cone_filter"  class="box-options-option" title="Cone Filter">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-target"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg></span>
                                        </div>
                                    </div>

                                    <!-- Pyrmadial Filter -->
                                    <div class="col-md-4 mt-3">
                                        <div id="cut_image_select_pyrmadial_filter" class="box-options-option" title="Pyrmadial Filter">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-triangle"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path></svg></span>
                                        </div>
                                    </div>

                                    <!-- Median -->
                                    <div class="col-md-4 mt-3">
                                        <div id="cut_image_select_median_filter" class="box-options-option" title="Median">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sunrise"><path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline></svg></span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div>

                        <!-- [3] HP Filters -->
                        <!-- <div class="effect-box-options-box-container mt-5">

                            <div class="box-title">
                                <span>Edge Detection</span>
                            </div>

                            <div class="box-options">
                                <div class="row"> -->
                                    
                                    <!-- Vertical Sobel -->
                                    <!-- <div class="col-md-3">
                                        <div class="box-options-option" title="Vertical Edges">
                                            <span style="transform: rotate(-45deg); display: block;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg></span>
                                        </div>
                                    </div> -->

                                    <!-- Horizontal Sobel-->
                                    <!-- <div class="col-md-3">
                                        <div class="box-options-option" title="Horizontal Edges">
                                            <span style="transform: rotate(45deg); display: block;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg></span>
                                        </div>
                                    </div> -->

                                    <!-- Full Soble -->
                                    <!-- <div class="col-md-3">
                                        <div class="box-options-option" title="All Edges">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-move"><polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line></svg></span>
                                        </div>
                                    </div> -->

                                    <!-- laplacian -->
                                    <!-- <div class="col-md-3">
                                        <div class="box-options-option" title="Laplacian ">
                                            <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg></span>
                                        </div>
                                    </div>

                                </div>
                            </div>

                        </div> -->

                        <div class="zoom-controls">
                            <button id="apply_cut_selected_image_effects" class="btn btn-success btn-block">Save</button>
                        </div>

                    </div>
                </div>

            </div>
        </div>
        <!-- END OF SELECT PANAL -->

    <!-- End of work area -->

    <!-- Save project data model -->
    <div class="modal fade" id="save_project_and_exit" tabindex="-1" role="dialog" aria-labelledby="addProject" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Project Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    </button>
                </div>

                <div class="modal-body">
                    <i class="flaticon-cancel-12 close" data-dismiss="modal"></i>
                    <div class="add-contact-box">
                        <div class="add-contact-content">
                            <form action="{% url 'update_project' Project.id %}" method="post">
                                {% csrf_token %}
                                

                                <div class="form-group">
                                    <p>Project title</p>
                                    <input id="id_Project_Name" type="text" value="{{Project.Project_Name}}" name="Project_Name" maxlength="100" placeholder="Project title" class="form-control" required="">
                                </div>

                                <div class="form-group">
                                    <p>Progress</p>
                                    <input id="id_Progress" type="number" name="Progress" value="{{Project.Progress}}" min="0" max="100" placeholder="Progress" class="form-control" required> 
                                </div>

                                <div class="form-group">
                                    <p>Status</p>
                                    <select name="status" id="id_status" class="form-control" required>
                                        <option value="0" {% if Project.status == '0' %} selected {% endif %}>Complete</option>
                                        <option value="1" {% if Project.status == '1' %} selected {% endif %}>Not start</option>
                                        <option value="2" {% if Project.status == '2' %} selected {% endif %}>Pending</option>
                                        <option value="3" {% if Project.status == '3' %} selected {% endif %}>Working on</option>
                                    </select>
                                </div>


                                <div class="modal-footer">
                                    <span class="btn btn-dark" data-dismiss="modal"> <i class="flaticon-delete-1"></i> Cancel</span>
                                    <button type="submit" class="float-left btn btn-success">Save updates</button>
                                </div>

                            </form>
                        </div>
                    </div>
                </div>
                
            </div>
        </div>
    </div>
    <!-- END Save project data model -->

{% endblock body %}


<!-- Current Page Scripts Files -->
{% block currentPageScripts %}
    
    <script src="{% static 'plugins/noUiSlider/nouislider.min.js' %}"></script>
    <script src="{% static 'plugins/bootstrap-range-Slider/bootstrap-rangeSlider.js' %}"></script>
    <script src="{% static 'plugins/apex/apexcharts.min.js' %}"></script>
    <script src="{% static 'plugins/apex/custom-apexcharts.js' %}"></script>

    <script type="text/javascript">
        
        $('body').addClass('alt-menu');

    </script>

    <!-- required scripts -->
    <script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>

    {% if not Images %}
        <script src="{% static 'plugins/file-upload/file-upload-with-preview.min.js' %}"></script>

        <!-- file upload script -->
        <script>
            //IMage upload
            var workImage = new FileUploadWithPreview('addWorkImage');

        </script>
    {% endif %}

    <!-- style scripts -->
    <script type="text/javascript">
        
        if(Cookies.getCookie('dark_mode') != ""){
            $('.card').css('box-shadow','rgb(6 8 24 / 44%) 1px 2px 6px 2px');
            $('.card').css('border','0');
        }
    </script>

    <!-- COnvert image to gray  -->
    <script>

        // =====================================================================================

        // Setting Panal Movement Function
        function move_setting_box(target){

            var targetWidth = $(target).width(),
                targetHeight = $(target).height();
            
            // Set Cursor Position
            lx = targetWidth / 2;
            ly = targetHeight / 2;
            
           
            $(target).on({
                mousedown:function(){
                    $(this).parents(".effect-setting-panel ").addClass("move");
                    $(this).css("cursor","move");
                },
                mouseup:function(){
                    $(this).parents(".effect-setting-panel ").removeClass("move");
                    $(this).css("cursor","auto");
                }
            });
            
            $(document).on("mousemove",function(e){
        
                $(".move").offset({
                    left: e.pageX - lx,
                    top:e.pageY - ly
                });
                
            });

        }

        // crop box Movement Function
        function move_crop_box(target){

            var targetWidth = $(target).width(),
                targetHeight = $(target).height();
            
            // Set Cursor Position
            lx = targetWidth / 2;
            ly = targetHeight / 2;
            
           
            $(target).on({
                mousedown:function(){
                    $(this).addClass("move_crop");
                    $(this).css("cursor","move");
                },
                mouseup:function(){
                    $(this).removeClass("move_crop");
                    $(this).css("cursor","auto");
                }
            });
            
            $(document).on("mousemove",function(e){
        
                $(".move_crop").offset({
                    left: e.pageX - lx,
                    top:e.pageY - ly
                });
                
                // Get the current offset values
                let box_positions = $(".image-crop-box").position();

                $('#crop-box-left-position').val(box_positions.left);
                $('#crop-box-top-position').val(box_positions.top);
            });

        }

        // Move the setting box caller
        $(document).on('mouseenter', '.effect-setting-panel .effect-setting-panel-header', function(){
           // call movement function
            move_setting_box($(this));
        });

        // Move the crop box caller
        $(document).on('mouseenter', '.image-crop-box', function(){
           // call movement function
            move_crop_box($(this));
        });

        // Close the setting box
        $(document).on('click', '.effect-setting-panel .effect-setting-panel-header .close span', function(){
            
            if ($(this).hasClass('Skew_setting_panal_box')){
                $('.skew-selection-box .clip-box').css('clip-path', `polygon(0 0,0 0,0 0,0 0)`)
            }else if($(this).hasClass('close_crop_box')){
                $('.image-crop-box').fadeOut();
                $('.image-crop-box').css('width', '50px');
                $('.image-crop-box').css('height', '50px');
                
                // Reset the crop box
                $('.image-crop-box').css('left', 0 + 'px');
                $('.image-crop-box').css('top', 0 + 'px');

            }

           // close the setting box
           $(this).parents(".effect-setting-panel ").remove();
        });

        // ============================================================================================

        // Reset the sliders of the current image
        function resetColorSliders(format, color_data){

            // Updata slider value
            progressBarCount('.progress-range-counter');

            // Set the Gray VAlue
            if(format == '1'){
                $(".current-effects-options").html(`

                        <!-- Gray Sliders -->
                        <div class="col-md-12 gray-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">GRAY</span>
                                <div class="range-count gray-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[0]}">${color_data[0]}</span></div>
                                <input id="gray-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[0]}">
                            </div>

                        </div>

                    `)

                $(".current-effects-options").html(`

                        <!-- Gray Sliders -->
                        <div class="col-md-12 gray-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">GRAY</span>
                                <div class="range-count gray-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[0]}">${color_data[0]}</span></div>
                                <input id="gray-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[0]}">
                            </div>

                        </div>

                    `)


            }else if(format == '2'){
                // Set the HSV Sliders
                $(".current-effects-options").html(`

                        <!-- Hue Sliders -->
                        <div class="col-md-12 hue-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">HUE</span>
                                <div class="range-count hue-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[0]}">${color_data[0]}</span></div>
                                <input id="hue-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[0]}">
                            </div>

                        </div>

                        <!-- Saturation Sliders -->
                        <div class="col-md-12 saturation-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">SATURATION</span>
                                <div class="range-count saturation-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[1]}">${color_data[1]}</span></div>
                                <input id="saturation-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[1]}">
                            </div>

                        </div>

                        <!-- Value Sliders -->
                        <div class="col-md-12 value-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">VALUE</span>
                                <div class="range-count value-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[2]}">${color_data[2]}</span></div>
                                <input id="value-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[2]}">
                            </div>

                        </div>

                    `)
            }else{
                $(".current-effects-options").html(`

                        <!-- RED Sliders -->
                        <div class="col-md-12 red-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">RED</span>
                                <div class="range-count red-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[0]}">${color_data[0]}</span></div>
                                <input id="red-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[0]}">
                            </div>

                        </div>

                        <!-- GREEN Sliders -->
                        <div class="col-md-12 green-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">green</span>
                                <div class="range-count green-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[1]}">${color_data[1]}</span></div>
                                <input id="green-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[1]}">
                            </div>

                        </div>

                        <!-- BLUE Sliders -->
                        <div class="col-md-12 blue-controls mb-2">

                            <!-- Slider -->
                            <div class="custom-progress top-right progress-up" style="width: 100%">
                                <!-- Slider name -->
                                <span class="effect-option-title">blue</span>
                                <div class="range-count blue-slider-counter"><span class="range-count-number" data-rangecountnumber="${color_data[2]}">${color_data[2]}</span></div>
                                <input id="blue-slider" type="range" min="0" max="255" class="custom-range progress-range-counter" value="${color_data[2]}">
                            </div>

                        </div>

                    `)
            }
        }
        
        // Activate option and display its menu
        $(document).on('click', '.fast-controls-option', function(){
            
            // Toggle Class
            $(this).toggleClass('active-option').siblings().removeClass('active-option');

            if ($(this).attr('id') == 'convert-image' && $(this).hasClass('active-option')){
                $('.effect-title').html('convert image')
                $('.effects-container').html(`

                        <div class="col-md-4 mt-2">
                            <div class="effect-option card" id="convert-image-to-rgb">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-aperture"><circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line></svg></span>
                                <span>RGB</span>
                            </div>
                        </div>

                        <div class="col-md-4 mt-2">
                            <div class="effect-option card" id="convert-image-to-gray">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-aperture"><circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line></svg></span>
                                <span>GRAY</span>
                            </div>
                        </div>

                        <div class="col-md-4 mt-2">
                            <div class="effect-option card" id="convert-image-to-hsv">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-aperture"><circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line></svg></span>
                                <span>HSV</span>
                            </div>
                        </div>

                        <div class="col-md-12 mt-4">
                            <div class="effect-option card" id="image-normal-compression">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-package"><line x1="16.5" y1="9.4" x2="7.5" y2="4.21"></line><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg></span>
                                <span>Compression</span>
                            </div>
                        </div>

                    `)

            }else if($(this).attr('id') == 'image-histogram' && $(this).hasClass('active-option')){
                
                // Current Effect title
                $('.effect-title').html('Histogram')

                // Current effect content
                $('.effects-container').html(`

                        <div class="col-md-5 mt-2">
                            <div class="effect-option card" id="current-image-histogram">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pie-chart"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg></span>
                                <span>Histogram</span>
                            </div>
                        </div>

                        <div class="col-md-7 mt-2">
                            <div class="effect-option card" id="current-image-histogram-equalization">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></span>
                                <span>Hist. Equlization</span>
                            </div>
                        </div>


                    `)


            }else if($(this).attr('id') =='transformation-tools' && $(this).hasClass('active-option')){

                // Current Effect title
                $('.effect-title').html('Transformation tools')

                // Current effect content
                $('.effects-container').html(`

                        
                            <!-- ROTAT -->
                            <div class="col-md-4 mt-2">
                                <div class="effect-option card" id="rotat-current-image">
                                    <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></span>
                                    <span>Rotate</span>
                                </div>
                            </div>

                            <!-- FLIP -->
                            <div class="col-md-4 mt-2">
                                <div class="effect-option card" id="flip-current-image">
                                    <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></span>
                                    <span>Flip</span>
                                </div>
                            </div>

                            <!-- SKEW -->
                            <div class="col-md-4 mt-2">
                                <div class="effect-option card" id="skew-current-image">
                                    <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></span>
                                    <span>Skew</span>
                                </div>
                            </div>
                            
                            <!-- TRANSLATE -->
                            <div class="col-md-6 mt-2">
                                <div class="effect-option card" id="translate-current-image">
                                    <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></span>
                                    <span>Translation</span>
                                </div>
                            </div>

                            <!-- Blinding -->
                            <div class="col-md-6 mt-2">
                                <div class="effect-option card" id="blinding-current-image">
                                    <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon></svg></span>
                                    <span>Blinding</span>
                                </div>
                            </div>
                    `)


            }else if ($(this).attr('id') == 'image-brightness' && $(this).hasClass('active-option')) {

                // Current Effect title
                $('.effect-title').html('image brightness')

                // Current effect content
                $('.effects-container').html(`

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="negative-brightness">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-minimize-2"><polyline points="4 14 10 14 10 20"></polyline><polyline points="20 10 14 10 14 4"></polyline><line x1="14" y1="10" x2="21" y2="3"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg></span>
                                <span>Negative</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="log-brightness">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sunrise"><path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline></svg></span>
                                <span>Log</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="power-brightness">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg></span>
                                <span>Power</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="threshold-brightness">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-percent"><line x1="19" y1="5" x2="5" y2="19"></line><circle cx="6.5" cy="6.5" r="2.5"></circle><circle cx="17.5" cy="17.5" r="2.5"></circle></svg></span>
                                <span>Threshold</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="bitpLan-brightness">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-layers"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg></span>
                                <span>Bit Plan</span>
                            </div>
                        </div>


                    `)

            }else if($(this).attr('id') == 'image-select' && $(this).hasClass('active-option')){

                // Current Effect title
                $('.effect-title').html('Select')

                // Current effect content
                $('.effects-container').html(`

                        <div class="col-md-4 mt-2">
                            <div class="effect-option card" id="image-crop">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crop"><path d="M6.13 1L6 16a2 2 0 0 0 2 2h15"></path><path d="M1 6.13L16 6a2 2 0 0 1 2 2v15"></path></svg></span>
                                <span>Crop</span>
                            </div>
                        </div>

                        <div class="col-md-4 mt-2">
                            <div class="effect-option card" id="image-zoom-in">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-zoom-in"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line><line x1="11" y1="8" x2="11" y2="14"></line><line x1="8" y1="11" x2="14" y2="11"></line></svg></span>
                                <span>Zoom</span>
                            </div>
                        </div>

                        <div class="col-md-4 mt-2">
                            <div class="effect-option card" id="image-cut-select">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pen-tool"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg></span>
                                <span>Select</span>
                            </div>
                        </div>

                    `)

            }else if ($(this).attr('id') == 'image-LP-filters' && $(this).hasClass('active-option')) {


                // Current Effect title
                $('.effect-title').html('Bluring filters')

                // Current effect content
                $('.effects-container').html(`

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="avarage-filter">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg></span>
                                <span>Avarage</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="gaussian-filter">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-droplet"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"></path></svg></span>
                                <span>Gaussian</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="circular-filter">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-crosshair"><circle cx="12" cy="12" r="10"></circle><line x1="22" y1="12" x2="18" y2="12"></line><line x1="6" y1="12" x2="2" y2="12"></line><line x1="12" y1="6" x2="12" y2="2"></line><line x1="12" y1="22" x2="12" y2="18"></line></svg></span>
                                <span>Circular</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="cone-filter">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-target"><circle cx="12" cy="12" r="10"></circle><circle cx="12" cy="12" r="6"></circle><circle cx="12" cy="12" r="2"></circle></svg></span>
                                <span>Cone</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="pyrmadial-filter">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-triangle"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path></svg></span>
                                <span>Pyrmadial</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="median-filter">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sunrise"><path d="M17 18a5 5 0 0 0-10 0"></path><line x1="12" y1="2" x2="12" y2="9"></line><line x1="4.22" y1="10.22" x2="5.64" y2="11.64"></line><line x1="1" y1="18" x2="3" y2="18"></line><line x1="21" y1="18" x2="23" y2="18"></line><line x1="18.36" y1="11.64" x2="19.78" y2="10.22"></line><line x1="23" y1="22" x2="1" y2="22"></line><polyline points="8 6 12 2 16 6"></polyline></svg></span>
                                <span>Median</span>
                            </div>
                        </div>

                    `)


            }else if ($(this).attr('id') == 'image-HP-filters' && $(this).hasClass('active-option')) {


                // Current Effect title
                $('.effect-title').html('Edge Detection')

                // Current effect content
                $('.effects-container').html(`

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="v-edgies">
                                <span style="transform: rotate(-45deg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg></span>
                                <span>V-Edgies</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="h-edgies">
                                <span style="transform: rotate(45deg)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize-2"><polyline points="15 3 21 3 21 9"></polyline><polyline points="9 21 3 21 3 15"></polyline><line x1="21" y1="3" x2="14" y2="10"></line><line x1="3" y1="21" x2="10" y2="14"></line></svg></span>
                                <span>H-Edgies</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="sobel-edgies">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-move"><polyline points="5 9 2 12 5 15"></polyline><polyline points="9 5 12 2 15 5"></polyline><polyline points="15 19 12 22 9 19"></polyline><polyline points="19 9 22 12 19 15"></polyline><line x1="2" y1="12" x2="22" y2="12"></line><line x1="12" y1="2" x2="12" y2="22"></line></svg></span>
                                <span>Sobel Edgies</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="laplacian-edgies">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-maximize"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg></span>
                                <span>Laplacian</span>
                            </div>
                        </div>

                        <div class="col-md-6 mt-2">
                            <div class="effect-option card" id="OCR-detection">
                                <span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-feather"><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line></svg></span>
                                <span>OCR</span>
                            </div>
                        </div>

                    `)


            }else{
                $('.effect-title').html('effect setting')
                $('.effects-container').html(`

                        <!-- NO EFFECT SELLECTED -->
                        <div class="col-md-12 mt-2 no-effect-selected">
                            <span>no effect selected</span>
                        </div>
                        
                    `)
            }

        });

        // update the current work image
        $(document).on('click', ".work-area-container .history-side .history-side-image-container .history-card-image img", function(){
            let image_id = $(this).attr('image_id'),
                image_path = $(this).attr('src');

            $('.current-work-image #current-image').attr('image_id',image_id);
            $('.current-work-image #current-image').attr('src',image_path);

            // Get Image Data
            $.ajax({
                type:"POST",
                url:"/image/image_data/",
                data:{
                    image_id :image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['color_data'])

                }
            });

        });

        // Convert image to rgb
        $(document).on('click', "#convert-image-to-rgb", function(){
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/convert2rgb/",
                data:{
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])
                }
            });
        });

        // Convert image to gray
        $(document).on('click', "#convert-image-to-gray", function(){
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/convert2gray/",
                data:{
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])
                }
            });
        });

        // Convert image to hsv
        $(document).on('click', "#convert-image-to-hsv", function(){
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/convert2hsv/",
                data:{
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])
                }
            });
        });

        // Image Compression
        $(document).on('click', "#image-normal-compression", function(){
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/image_compression/",
                data:{
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                    

                    // Remove the current power setting box
                    $('#bitpLan-setting-box').remove()

                    // Display new power setting box
                    $('body').append(`

                            <div class="effect-setting-panel" id="bitpLan-setting-box">
                                
                                <!-- Header -->
                                <div class="effect-setting-panel-header">
                                    <div class="title">
                                        <span>Commpression ratio</span>
                                    </div>
                                    <div class="close">
                                        <span>x</span>
                                    </div>
                                </div>

                                <!-- Body -->
                                <div class="effect-setting-panel-body">
                                    
                                    <!-- [1] BitPlan value -->
                                    <div>
                                        <!-- Box size title -->
                                        
                                        <div class="select_box_label">
                                            <span style="text-align: left !important; color: #333 !important;">Commpression ratio:</span>
                                            <span style="text-align: left !important; color: #111 !important; font-weight: 700;">${ data['compression_ratio']}</span>
                                        </div>

                                    </div>
                                    <!-- [1] END OF Threshold value -->

                                </div>

                            </div>
                            
                        `);



                }
            });
        });

        // Change the red value
        $(document).on('change', '#red-slider', function(){

            // Updata slider value
            progressBarCount('.progress-range-counter');

            // Display the waiting model
            $('.color_conversion_model').css('display', 'block')

            // Read the red value
            var image_red_value = $('#red-slider').attr('value');

            // catch the current value
            var red_slider_value = $('.red-slider-counter .range-count-number').attr('data-rangecountnumber');

            // Required red value
            var red_value = red_slider_value - image_red_value;

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');



            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/update_red_value/",
                data:{
                    image_id :Image_id,
                    red_value: red_value,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Display the waiting model
                    $('.color_conversion_model').css('display', 'none')


                    $('.current-work-image #current-image').attr('image_id' ,data['image_id']);
                    $('.current-work-image #current-image').attr('src' ,data['image_path']);

                    // Add image to history
                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Update sliders values
                    $('#red-slider').attr('value',data['Color_data'][0]);
                    $('.red-slider-counter .range-count-number').attr('data-rangecountnumber',data['Color_data'][0]);
                    $('.red-slider-counter .range-count-number').html(data['Color_data'][0])
                }   
            });

        });

        // Change the green value
        $(document).on('change', '#green-slider', function(){

            // Updata slider value
            progressBarCount('.progress-range-counter');

            // Display the waiting model
            $('.color_conversion_model').css('display', 'block')

            // Read the red value
            var image_green_value = $('#green-slider').attr('value');

            // catch the current value
            var green_slider_value = $('.green-slider-counter .range-count-number').attr('data-rangecountnumber');

            // Required red value
            var green_value = green_slider_value - image_green_value;

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');



            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/update_green_value/",
                data:{
                    image_id :Image_id,
                    green_value: green_value,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Display the waiting model
                    $('.color_conversion_model').css('display', 'none')


                    $('.current-work-image #current-image').attr('image_id' ,data['image_id']);
                    $('.current-work-image #current-image').attr('src' ,data['image_path']);

                    // Add image to history
                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Update sliders values
                    $('#green-slider').attr('value',data['Color_data'][1]);
                    $('.green-slider-counter .range-count-number').attr('data-rangecountnumber',data['Color_data'][1]);
                    $('.green-slider-counter .range-count-number').html(data['Color_data'][1])

                }
            });

        });

        // Change the blue value
        $(document).on('change', '#blue-slider', function(){

            // Updata slider value
            progressBarCount('.progress-range-counter');

            // Display the waiting model
            $('.color_conversion_model').css('display', 'block')

            // Read the red value
            var image_blue_value = $('#blue-slider').attr('value');

            // catch the current value
            var blue_slider_value = $('.blue-slider-counter .range-count-number').attr('data-rangecountnumber');

            // Required red value
            var blue_value = blue_slider_value - image_blue_value;

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');



            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/update_blue_value/",
                data:{
                    image_id :Image_id,
                    blue_value: blue_value,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Display the waiting model
                    $('.color_conversion_model').css('display', 'none')


                    $('.current-work-image #current-image').attr('image_id' ,data['image_id']);
                    $('.current-work-image #current-image').attr('src' ,data['image_path']);

                    // Add image to history
                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Update sliders values
                    $('#blue-slider').attr('value',data['Color_data'][2]);
                    $('.blue-slider-counter .range-count-number').attr('data-rangecountnumber',data['Color_data'][2]);
                    $('.blue-slider-counter .range-count-number').html(data['Color_data'][2])

                }
            });

        });

        // Change the Gray value
        $(document).on('change', '#gray-slider', function(){

            // Updata slider value
            progressBarCount('.progress-range-counter');

            // Display the waiting model
            $('.color_conversion_model').css('display', 'block')

            // Read the red value
            var image_gray_value = $('#gray-slider').attr('value');

            // catch the current value
            var gray_slider_value = $('.gray-slider-counter .range-count-number').attr('data-rangecountnumber');

            // Required red value
            var gray_value = gray_slider_value - image_gray_value;

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/update_gray_value/",
                data:{
                    image_id :Image_id,
                    gray_value: gray_value,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Display the waiting model
                    $('.color_conversion_model').css('display', 'none')


                    $('.current-work-image #current-image').attr('image_id' ,data['image_id']);
                    $('.current-work-image #current-image').attr('src' ,data['image_path']);

                    // Add image to history
                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Update sliders values
                    $('#gray-slider').attr('value',data['Color_data'][0]);
                    $('.gray-slider-counter .range-count-number').attr('data-rangecountnumber',data['Color_data'][0]);
                    $('.gray-slider-counter .range-count-number').html(data['Color_data'][0])

                }
            });

        });

        // Change the Hue value
        $(document).on('change', '#hue-slider', function(){

            // Updata slider value
            progressBarCount('.progress-range-counter');

            // Display the waiting model
            $('.color_conversion_model').css('display', 'block')

            // Read the red value
            var image_hue_value = $('#hue-slider').attr('value');

            // catch the current value
            var hue_slider_value = $('.hue-slider-counter .range-count-number').attr('data-rangecountnumber');

            // Required red value
            var hue_value = hue_slider_value - image_hue_value;

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');



            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/update_hue_value/",
                data:{
                    image_id :Image_id,
                    hue_value: hue_value,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Display the waiting model
                    $('.color_conversion_model').css('display', 'none')


                    $('.current-work-image #current-image').attr('image_id' ,data['image_id']);
                    $('.current-work-image #current-image').attr('src' ,data['image_path']);

                    // Add image to history
                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Update sliders values
                    $('#hue-slider').attr('value',data['Color_data'][0]);
                    $('.hue-slider-counter .range-count-number').attr('data-rangecountnumber',data['Color_data'][0]);
                    $('.hue-slider-counter .range-count-number').html(data['Color_data'][0])

                }
            });

        });

        // Change the saturation value
        $(document).on('change', '#saturation-slider', function(){

            // Updata slider value
            progressBarCount('.progress-range-counter');


            // Display the waiting model
            $('.color_conversion_model').css('display', 'block')

            // Read the red value
            var image_saturation_value = $('#saturation-slider').attr('value');

            // catch the current value
            var saturation_slider_value = $('.saturation-slider-counter .range-count-number').attr('data-rangecountnumber');

            // Required red value
            var saturation_value = saturation_slider_value - image_saturation_value;

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');



            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/update_saturation_value/",
                data:{
                    image_id :Image_id,
                    saturation_value: saturation_value,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Display the waiting model
                    $('.color_conversion_model').css('display', 'none')


                    $('.current-work-image #current-image').attr('image_id' ,data['image_id']);
                    $('.current-work-image #current-image').attr('src' ,data['image_path']);

                    // Add image to history
                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Update sliders values
                    $('#saturation-slider').attr('value',data['Color_data'][1]);
                    $('.saturation-slider-counter .range-count-number').attr('data-rangecountnumber',data['Color_data'][1]);
                    $('.saturation-slider-counter .range-count-number').html(data['Color_data'][1])

                }
            });

        });

        // Change the value value
        $(document).on('change', '#value-slider', function(){

            // Updata slider value
            progressBarCount('.progress-range-counter');

            // Display the waiting model
            $('.color_conversion_model').css('display', 'block')

            // Read the red value
            var image_value_value = $('#value-slider').attr('value');

            // catch the current value
            var value_slider_value = $('.value-slider-counter .range-count-number').attr('data-rangecountnumber');

            // Required red value
            var value_value = value_slider_value - image_value_value;

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');



            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/update_value_value/",
                data:{
                    image_id :Image_id,
                    value_value: value_value,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Display the waiting model
                    $('.color_conversion_model').css('display', 'none')


                    $('.current-work-image #current-image').attr('image_id' ,data['image_id']);
                    $('.current-work-image #current-image').attr('src' ,data['image_path']);

                    // Add image to history
                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Update sliders values
                    $('#value-slider').attr('value',data['Color_data'][2]);
                    $('.value-slider-counter .range-count-number').attr('data-rangecountnumber',data['Color_data'][2]);
                    $('.value-slider-counter .range-count-number').html(data['Color_data'][2])

                }
            });

        });


        // ================================= Histogram ==============================
        
        function current_image_histogram(){

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/image_histogram/",
                data:{
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    // Clear the old chart
                    $('.Histogram-canvas .card .chart').html('')

                    // Display Histogram container
                    $('.Histogram-canvas').fadeIn();

                    chart_height = document.querySelector('.Histogram-canvas .card .chart').clientHeight;
                    console.log("chart height" + chart_height)


                    if (data['Format'] == 1){

                        // GRA SCALE HISTOGRAM
                        var sCol = {
                                    chart: {
                                        height: chart_height,
                                        type: 'bar',
                                        toolbar: {
                                          show: false,
                                        }
                                    },
                                    plotOptions: {
                                        bar: {
                                            horizontal: false,
                                            columnWidth: '55%',
                                            endingShape: 'rounded'  
                                        },
                                    },
                                    colors: ['#888'],
                                    dataLabels: {
                                        enabled: false
                                    },
                                    stroke: {
                                        show: true,
                                        width: 2,
                                        colors: ['transparent']
                                    },
                                    series: [{
                                        name: 'HISTOGRAM - GRAY SCALE',
                                        data: data['data'],
                                    }],
                                    xaxis: {
                                        categories: data['range'],
                                    },
                                    yaxis: {
                                        title: {
                                            text: 'Repeated Times'
                                        }
                                    },
                                    fill: {
                                        opacity: 1,
                                    },
                                    legend: {
                                          position: 'bottom',
                                          horizontalAlign: 'center',
                                          fontSize: '14px',
                                          markers: {
                                            width: 10,
                                            height: 10,
                                          },
                                          itemMargin: {
                                            horizontal: 0,
                                            vertical: 8
                                          }
                                    },
                                    tooltip: {
                                        y: {
                                            formatter: function (val) {
                                                return "# " + val + " Repeadted Times"
                                            }
                                        }
                                    }
                                }

                                var chart = new ApexCharts(
                                    document.querySelector("#Histogram-canvas"),
                                    sCol
                                );

                                chart.render();


                    }else if (data['Format'] == 2){

                        // HSV SCALE HISTOGRAM
                        var sCol = {
                                    chart: {
                                        height: chart_height,
                                        type: 'bar',
                                        toolbar: {
                                          show: false,
                                        }
                                    },
                                    plotOptions: {
                                        bar: {
                                            horizontal: false,
                                            columnWidth: '55%',
                                            endingShape: 'rounded'  
                                        },
                                    },
                                    dataLabels: {
                                        enabled: false
                                    },
                                    stroke: {
                                        show: true,
                                        width: 2,
                                        colors: ['transparent']
                                    },
                                    series: [{
                                        name: 'Hue',
                                        data: data['hue_data'],
                                    },
                                    {
                                        name: 'Saturation',
                                        data: data['saturation_data'],
                                    },
                                    {
                                        name: 'Value',
                                        data: data['value_data'],
                                    }],
                                    xaxis: {
                                        categories: data['range'],
                                    },
                                    yaxis: {
                                        title: {
                                            text: 'Repeated Times'
                                        }
                                    },
                                    fill: {
                                        opacity: 1,
                                        

                                    },
                                    tooltip: {
                                        y: {
                                            formatter: function (val) {
                                                return "# " + val + " Repeadted Times"
                                            }
                                        }
                                    }
                                }

                                var chart = new ApexCharts(
                                    document.querySelector("#Histogram-canvas"),
                                    sCol
                                );

                                chart.render();

                    }else{

                        // RED SCALE HISTOGRAM
                        var sCol = {
                                    chart: {
                                        height: chart_height,
                                        type: 'bar',
                                        toolbar: {
                                          show: false,
                                        }
                                    },
                                    colors: ['#f00', '#0f0', '#00f'],
                                    plotOptions: {
                                        bar: {
                                            horizontal: false,
                                            columnWidth: '55%',
                                            endingShape: 'rounded'  
                                        },
                                    },
                                    dataLabels: {
                                        enabled: false,
                                    },
                                    stroke: {
                                        show: true,
                                        width: 2,
                                        colors: ['transparent']
                                    },
                                    series: [{
                                        name: 'RED',
                                        data: data['red_data'],
                                    },
                                    {
                                        name: 'GREEN',
                                        data: data['green_data'],
                                    },
                                    {
                                        name: 'BLUE',
                                        data: data['blue_data'],
                                    }],
                                    xaxis: {
                                        categories: data['range'],
                                    },
                                    yaxis: {
                                        title: {
                                            text: 'Repeated Times'
                                        }
                                    },
                                    fill: {
                                        opacity: 1,
                                        colors: ['#f00','#0f0','#00f'],

                                    },
                                    legend: {
                                          position: 'bottom',
                                          horizontalAlign: 'center',
                                          fontSize: '14px',
                                          markers: {
                                            width: 10,
                                            height: 10,
                                          },
                                          itemMargin: {
                                            horizontal: 0,
                                            vertical: 8
                                          }
                                    },
                                    tooltip: {
                                        y: {
                                            formatter: function (val) {
                                                return "# " + val + " Repeadted Times"
                                            }
                                        }
                                    }
                                }

                                var chart = new ApexCharts(
                                    document.querySelector("#Histogram-canvas"),
                                    sCol
                                );

                                chart.render();

                    }

                }
            });


        }

        // [1] Close the histogram chart
        $(document).on('click', "#close-histogram-card", function(){
            // Close Histogram container
            $('.Histogram-canvas').fadeOut();
        });

        // [2] Histogram body zoom in
        $(document).on('change', "#card-body-zoom-value", function(){
            
            // Get the zoom value
            let zoom_value = $(this).val();

            // Close Histogram container
            $('.Histogram-canvas .card .card-body .chart').css('width', zoom_value + '%');
            
            // Get container width
            chart_width = document.querySelector('.Histogram-canvas .card .card-body .chart').clientWidth;

            // Display the current image Histogram
            current_image_histogram();

        });

        // [2] Display the current image histogram
        $(document).on('click', '#current-image-histogram', function(){

            // Display the current image Histogram
            current_image_histogram();

        });

        // Apply HIstogram Equalization
        $(document).on('click', "#current-image-histogram-equalization", function(){

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/apply_histogram_equalization/",
                data:{
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])
                }
            });

        });

        // ================================== Image Transformations ========================
        
        // -------------------------- [1] START OF ROTATE FUNCTIONS------------------
        
        // [1.1] ROTATE: DISPLAY THE ROTATE SETTING PANEL
        $(document).on('click', '#rotat-current-image', function(){

            // Remove the current rotate setting box
            $('#rotate-setting-box').remove()

            // Display new rotate setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="rotate-setting-box">
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Rotate</span>
                            </div>
                            <div class="close">
                                <span>x</span>
                            </div>
                        </div>
                        <div class="effect-setting-panel-body">
                            <div class="row" style="align-items: center;">

                                <!-- Rotate Degree -->
                                <div class="col-md-8">
                                    <span class="icon-title" style="text-align: left" >Rotate Degree</span>
                                    <input id="rotation-degree" style="width: 100%" type="number" min="-360" max="360" value="0" />   
                                </div>

                                <!-- Rotate Button -->
                                <div class="col-md-4" style="margin: 0; padding: 0;">
                                    <button id="apply-rotation" class="btn btn-dark"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-refresh-cw"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg></button>
                                </div>

                            </div>
                        </div>
                    </div>
                `);

        });

        // [1.2] ROTATE: ROTATE THE IMAGE DEPEND ON ROTATION ANGLE
        $(document).on('click', '#apply-rotation', function(){
            
            // Get the rotation anagle
            let rotation_angle = $('#rotation-degree').val();

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/rotate_image/",
                data:{
                    image_id :Image_id,
                    rotation_angle: rotation_angle,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])
                }
            });

        });

        //--------------------------- END OF ROTATE FUNCTIONS ----------------------------

        // -------------------------- [2] START OF FLIP FUNCTIONS------------------

        // [2.1] FLIP: DISPLAY THE FLIP SETTING PANAL
        $(document).on('click', '#flip-current-image', function(){

            // Remove the current flip setting box
            $('#flip-setting-box').remove()

            // Display new flip setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="flip-setting-box">
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Flip</span>
                            </div>
                            <div class="close">
                                <span>x</span>
                            </div>
                        </div>
                        <div class="effect-setting-panel-body">
                            <div class="row">

                                <!-- FLip X -->
                                <div class="col-md-4">
                                    <span id="flip-image" flip="X" class="flip-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" height="24" viewBox="0 0 24 24" width="24"><path d="M17.1334 3.85537C17.3607 3.99056 17.5001 4.2355 17.5001 4.5V10.75C17.5001 11.1642 17.1643 11.5 16.7501 11.5H5.25007C4.90702 11.5 4.6077 11.2672 4.52318 10.9348C4.43867 10.6023 4.59052 10.2548 4.89194 10.091L16.3919 3.84103C16.6243 3.71473 16.9061 3.72018 17.1334 3.85537ZM8.20071 10H16.0001V5.76122L8.20071 10Z" fill="#212121"/><path d="M17.5001 19.5C17.5001 19.7645 17.3607 20.0094 17.1334 20.1446C16.9061 20.2798 16.6243 20.2853 16.3919 20.159L4.89194 13.909C4.59052 13.7452 4.43867 13.3977 4.52318 13.0652C4.6077 12.7328 4.90702 12.5 5.25007 12.5H16.7501C17.1643 12.5 17.5001 12.8358 17.5001 13.25V19.5Z" fill="#212121"/></svg></span>
                                    <span class="icon-title">X</span>
                                </div>

                                <!-- Flip Y -->
                                <div class="col-md-4">
                                    <span id="flip-image" flip="Y" class="flip-icon"><svg xmlns="http://www.w3.org/2000/svg" fill="none" height="24" viewBox="0 0 24 24" width="24"><path d="M4.5 17.5001C4.2355 17.5001 3.99056 17.3607 3.85537 17.1334C3.72018 16.9061 3.71473 16.6243 3.84103 16.3919L10.091 4.89194C10.2548 4.59052 10.6023 4.43867 10.9348 4.52318C11.2672 4.6077 11.5 4.90702 11.5 5.25007V16.7501C11.5 17.1643 11.1642 17.5001 10.75 17.5001H4.5Z" fill="#212121"/><path d="M20.1446 17.1334C20.0094 17.3607 19.7645 17.5001 19.5 17.5001H13.25C12.8358 17.5001 12.5 17.1643 12.5 16.7501V5.25007C12.5 4.90702 12.7328 4.6077 13.0652 4.52318C13.3977 4.43867 13.7452 4.59052 13.909 4.89194L20.159 16.3919C20.2853 16.6243 20.2798 16.9061 20.1446 17.1334ZM14 8.20071V16.0001H18.2388L14 8.20071Z" fill="#212121"/></svg></span>
                                    <span class="icon-title">Y</span>
                                </div>

                                <!-- Flip XY -->
                                <div class="col-md-4">
                                    <span id="flip-image" flip="XY" class="flip-icon" style="transform: rotate(270deg);"><svg xmlns="http://www.w3.org/2000/svg" fill="none" height="24" viewBox="0 0 24 24" width="24"><path d="M17.1334 3.85537C17.3607 3.99056 17.5001 4.2355 17.5001 4.5V10.75C17.5001 11.1642 17.1643 11.5 16.7501 11.5H5.25007C4.90702 11.5 4.6077 11.2672 4.52318 10.9348C4.43867 10.6023 4.59052 10.2548 4.89194 10.091L16.3919 3.84103C16.6243 3.71473 16.9061 3.72018 17.1334 3.85537ZM8.20071 10H16.0001V5.76122L8.20071 10Z" fill="#212121"/><path d="M17.5001 19.5C17.5001 19.7645 17.3607 20.0094 17.1334 20.1446C16.9061 20.2798 16.6243 20.2853 16.3919 20.159L4.89194 13.909C4.59052 13.7452 4.43867 13.3977 4.52318 13.0652C4.6077 12.7328 4.90702 12.5 5.25007 12.5H16.7501C17.1643 12.5 17.5001 12.8358 17.5001 13.25V19.5Z" fill="#212121"/></svg></span>
                                    <span class="icon-title">XY</span>
                                </div>

                            </div>
                        </div>
                    </div>
                `);

        });

        // [2.2] FLIP: FLIP IMAGE OVER X , Y, XY AXIS
        $(document).on('click', '#flip-image', function(){

            // Read the flip direction
            let flip_direction = $(this).attr('flip');

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/flip_image/",
                data:{
                    image_id :Image_id,
                    flip_direction: flip_direction,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])
                }
            });

        });


        //--------------------------- END OF FLIP FUNCTIONS ----------------------------


        // -------------------------- [3] START OF SKEW FUNCTIONS------------------

        // [3.1] SKEW: DISPLAY THE SKEW SETTING PANAL
        $(document).on('click', '#skew-current-image', function(){

            // Remove the current skew setting box
            $('#skew-setting-box').remove()

            // Remove the current skew box
            $('.skew-selection-box .clip-box').css('display', 'none');

            // Create new skew box
            $('.skew-selection-box .clip-box').fadeIn();

            // Display new skew setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="skew-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Skew</span>
                            </div>
                            <div class="close">
                                <span class="Skew_setting_panal_box">x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] BOX SIZE -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="skew-sections-titles">Box size (px)</span>
                                </div>

                                <!-- Box width -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label>Width</label>
                                        <input id="skew_box_width" type="number" value="0" class="form-control">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label>Height</label>
                                        <input id="skew_box_height" type="number" value="0" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <!-- [1] END OF BOX SIZE -->


                            <!-- [2] POINT [1] -->
                            <div class="row">

                                <!-- POINTS (PX) -->
                                <div class="col-md-12 mb-1">
                                    <span class="skew-sections-titles">POINT 1 (px)</span>
                                </div>

                                <!-- POINT 1 -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_1_x" type="number" value="0" class="skew_box_points form-control" placeholder="X">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_1_y" type="number" value="0" class="skew_box_points form-control" placeholder="Y">
                                    </div>
                                </div>
                            </div>
                            <!-- [2] POINT [1] -->

                            <!-- [2] POINT [2] -->
                            <div class="row">

                                <!-- POINTS (PX) -->
                                <div class="col-md-12 mb-1">
                                    <span class="skew-sections-titles">POINT 2 (px)</span>
                                </div>

                                <!-- POINT 2 -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_2_x" type="number" value="0" class="skew_box_points form-control" placeholder="X">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_2_y" type="number" value="0" class="skew_box_points form-control" placeholder="Y">
                                    </div>
                                </div>
                            </div>
                            <!-- [2] POINT [2] -->

                            <!-- [2] POINT [3] -->
                            <div class="row">

                                <!-- POINTS (PX) -->
                                <div class="col-md-12 mb-1">
                                    <span class="skew-sections-titles">POINT 3 (px)</span>
                                </div>

                                <!-- POINT 3 -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_3_x" type="number" value="0" class="skew_box_points form-control" placeholder="X">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_3_y" type="number" value="0" class="skew_box_points form-control" placeholder="Y">
                                    </div>
                                </div>
                            </div>
                            <!-- [2] POINT [3] -->

                            <!-- [2] POINT [4] -->
                            <div class="row">

                                <!-- POINTS (PX) -->
                                <div class="col-md-12 mb-1">
                                    <span class="skew-sections-titles">POINT 4 (px)</span>
                                </div>

                                <!-- POINT 4 -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_4_x" type="number" value="0" class="skew_box_points form-control" placeholder="X">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <input id="skew_box_point_4_y" type="number" value="0" class="skew_box_points form-control" placeholder="Y">
                                    </div>
                                </div>
                            </div>
                            <!-- [2] POINT [4] -->


                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_skew_button">Apply Skew</button>
                                </div>
                            </div>


                        </div>

                    </div>
                `);

        });
        
        // [3.2] SKEW: Change the box width
        $(document).on('keyup', '#skew_box_width', function(){

            // Get width value
            let box_width = $(this).val() + 'px';

            // Change width
            $('.skew-selection-box .clip-box').css('width', box_width)

        });

        // [3.3] SKEW: Change the box height
        $(document).on('keyup', '#skew_box_height', function(){

            // Get width value
            let box_height = $(this).val() + 'px';

            // Change width
            $('.skew-selection-box .clip-box').css('height', box_height)

        });

        // [3.4] SKEW: Change the box points position
        $(document).on('keyup', '.skew_box_points', function(){

            // Get points
            let point_1_x = $('#skew_box_point_1_x').val()+ 'px',
                point_1_y = $('#skew_box_point_1_y').val()+ 'px',
                point_2_x = $('#skew_box_point_2_x').val()+ 'px',
                point_2_y = $('#skew_box_point_2_y').val()+ 'px',
                point_3_x = $('#skew_box_point_3_x').val()+ 'px',
                point_3_y = $('#skew_box_point_3_y').val()+ 'px',
                point_4_x = $('#skew_box_point_4_x').val()+ 'px',
                point_4_y = $('#skew_box_point_4_y').val()+ 'px';


            // Change width
            $('.skew-selection-box .clip-box').css('clip-path', `polygon(${point_1_x} ${point_1_y}, ${point_2_x} ${point_2_y}, ${point_3_x} ${point_3_y}, ${point_4_x} ${point_4_y})`)

        });

        // [3.5] SKEW: skew the image
        $(document).on('click', '#apply_skew_button', function(){

            // Get points
            let point_1_x = $('#skew_box_point_1_x').val(),
                point_1_y = $('#skew_box_point_1_y').val(),
                point_2_x = $('#skew_box_point_2_x').val(),
                point_2_y = $('#skew_box_point_2_y').val(),
                point_4_x = $('#skew_box_point_4_x').val(),
                point_4_y = $('#skew_box_point_4_y').val();

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/skew_image/",
                data:{
                    image_id :Image_id,
                    point_1_x: point_1_x,
                    point_1_y: point_1_y,
                    point_2_x: point_2_x,
                    point_2_y: point_2_y,
                    point_4_x: point_4_x,
                    point_4_y: point_4_y,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                    // Reset the skew values
                    $('#skew_box_point_1_x').attr('value','0');
                    $('#skew_box_point_1_y').attr('value','0');
                    $('#skew_box_point_2_x').attr('value','0');
                    $('#skew_box_point_2_y').attr('value','0');
                    $('#skew_box_point_3_x').attr('value','0');
                    $('#skew_box_point_3_y').attr('value','0');
                    $('#skew_box_point_4_x').attr('value','0');
                    $('#skew_box_point_4_y').attr('value','0');

                }
            });

        });


        //--------------------------- END OF SKEW FUNCTIONS ----------------------------


        // -------------------------- [4] START OF TRANSITION FUNCTIONS------------------
        
        // [4.1] TRANSLATION: TRANSLATION BOX
        $(document).on('click', '#translate-current-image', function(){

            // Remove the current translation setting box
            $('#translate-setting-box').remove()

            // Display new translation setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="translate-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Translate</span>
                            </div>
                            <div class="close">
                                <span>x</span>
                            </div>
                        </div>


                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] Image transtion -->
                            <div class="row">
                                
                                <!-- TX -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label>Tx</label>
                                        <input id="transiton_tx" type="number" value="0" class="form-control">
                                    </div>
                                </div>

                                <!-- TY -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label>Ty</label>
                                        <input id="transiton_ty" type="number" value="0" class="form-control">
                                    </div>
                                </div>
                            </div>
                            <!-- [1] END OF Image transtion -->

                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_transtions_button">Apply Transiton</button>
                                </div>
                            </div>

                        </div>


                    </div>
                `);

        });

        // [4.2] TRANSLATION: Apply translation
        $(document).on('click', '#apply_transtions_button', function(){

            // Get points
            let Tx = $('#transiton_tx').val(),
                Ty = $('#transiton_ty').val();

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/translation_image/",
                data:{
                    image_id :Image_id,
                    Tx: Tx,
                    Ty: Ty,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                    // Reset the skew values
                    $('#transiton_tx').attr('value','0');
                    $('#transiton_ty').attr('value','0');

                }
            });

        });
        
        //--------------------------- END OF TRANSITION FUNCTIONS ----------------------------
        
        // -------------------------- [5] START OF IMAGE BLINDING FUNCTIONS------------------
            
        // [5.1] BLINDING: Blinding Box
        $(document).on('click', '#blinding-current-image', function(){

            // Remove the current blinding setting box
            $('#blinding-setting-box').remove()

            // Display new blinding setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="blinding-setting-box">
                        

                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Image Blending</span>
                            </div>
                            <div class="close">
                                <span>x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] Options Box -->
                            <div class="row">
                                
                                
                                <!-- Current Image-->    
                                <div class="n-chk col-md-6">
                                    <label class="new-control new-radio radio-success">
                                      <input type="radio" class="new-control-input" id="blending_with_current_image" name="image_blending_form_selector">
                                      <span class="new-control-indicator"></span>Current
                                    </label>
                                </div>

                                <!-- new Image-->
                                <div class="n-chk col-md-6">
                                    <label class="new-control new-radio radio-danger">
                                      <input type="radio" class="new-control-input" id="blending_with_new_image" name="image_blending_form_selector">
                                      <span class="new-control-indicator"></span>New
                                    </label>
                                </div>


                            </div>
                            <!-- [1] END OF Image transtion -->

                            <!-- [2] Form body -->
                            <div class="row blinding_form_body">

                            </div>

                        </div>

                    </div>
                `);

        });

        // [5.2] BLINDING: blinding with the currnet image form
        $(document).on('change', '#blending_with_current_image', function(){

            // Form Body
            $('.blinding_form_body').html(`


                <div class="col-md-12 col-12" style="margin: 0 0 0 0 !important;">
                    <form method="post" enctype="multipart/form-data" id="blending_the_current_image_form">
                        {% csrf_token %}
                        <!-- Blending Persentage -->
                        <div class="blending_persentage">
                            
                            <!-- Select box Title -->
                            <div class="select_box_label">
                                <span>Blending percentage</span>
                            </div>
                            
                            <!-- Blending Select Box -->
                            <select class="select_blending_persentage" name="blending_persentages" id="select_blending_persentage_for_current_image" required>
                            </select>

                        </div>


                        <!-- Choose image Container -->
                        <div class="choose_image_container">

                            <!-- Choose box Title -->
                            <div class="choose_image_label">
                                <span>Choose image</span>
                            </div>

                            <!-- Blending Image -->
                            <div class="form-group">
                                <input id="choose_blending_image" type="file" name="blending_image" placeholder="choose image" class="form-control" required accept="image/*">
                            </div>


                            <!-- Submit Button -->
                            <input type="submit" name="Blending" value="Blending" class="mt-4 btn btn-dark btn-block">

                        </div>

                    </form>
                </div>


            `);

            // Blending Persentage options
            for (var i = 1; i <= 99; i++){
                $('#select_blending_persentage_for_current_image').append(`<option value="${ i / 100}">${i}%</option>`)
            }


        });

        // [5.3] BLINDING: blinding with the new image form
        $(document).on('change', '#blending_with_new_image', function(){

            // Form Body
            $('.blinding_form_body').html(`


                <div class="col-md-12 col-12" style="margin: 0 0 0 0 !important;">
                    <form method="post" enctype="multipart/form-data" id="blending_the_new_image_form">
                        {% csrf_token %}
                        <!-- Blending Persentage -->
                        <div class="blending_persentage">
                            
                            <!-- Select box Title -->
                            <div class="select_box_label">
                                <span>Blending percentage</span>
                            </div>
                            
                            <!-- Blending Select Box -->
                            <select class="select_blending_persentage" name="blending_persentages" id="select_blending_persentage_for_current_image" required>
                            </select>

                        </div>


                        <!-- Choose image Container -->
                        <div class="choose_image_container new_blending_image">

                            <!-- Choose box Title -->
                            <div class="choose_image_label">
                                <span>Image 1</span>
                            </div>

                            <!-- Blending Image -->
                            <div class="form-group">
                                <input id="choose_blending_image_1" type="file" name="blending_image_1" placeholder="choose image" class="form-control" required accept="image/*">
                            </div>

                        </div>

                        <!-- Choose image Container -->
                        <div class="choose_image_container new_blending_image">

                            <!-- Choose box Title -->
                            <div class="choose_image_label">
                                <span>Image 2</span>
                            </div>

                            <!-- Blending Image -->
                            <div class="form-group">
                                <input id="choose_blending_image_2" type="file" name="blending_image_2" placeholder="choose image" class="form-control" required accept="image/*">
                            </div>
                            
                        </div>


                        <!-- Submit Button -->
                        <input type="submit" name="Blending" value="Blending" class="mt-4 btn btn-dark btn-block">

                    </form>
                </div>


            `);

            // Appednf the blending persentages
            // Blending Persentage options
            for (var i = 1; i <= 99; i++){
                $('#select_blending_persentage_for_current_image').append(`<option value="${ i / 100}">${i}%</option>`)
            }

        });

        // [5.4] BLENDING: blending the current image form request
        $(document).on('submit', "#blending_the_current_image_form", function(e){
            
            // Prevent the submit action
            e.preventDefault();

            // Blending persentage
            blending_persentage_value = $('#select_blending_persentage_for_current_image').val();

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Create form data object
            var formData = new FormData();
            
            // Append the current file data to the form
            formData.append("image_id", Image_id);
            formData.append("blending_persentage_value", blending_persentage_value);
            formData.append("blending_image", $("input[id^='choose_blending_image']")[0].files[0]);
            formData.append("csrfmiddlewaretoken", "{{ csrf_token }}");


            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/blending_current_image/",
                processData: false,
                contentType: false,
                mimeType: "multipart/form-data",
                data: formData,
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])


                }
            });


        });

        //--------------------------- END OF IMAGE BLINDING FUNCTIONS --------------------


        // -------------------------- [6] START OF IMAGE NEGATIVE FUNCTIONS---------------
        $(document).on('click', "#negative-brightness", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/negative_brightness/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });

        //--------------------------- END OF IMAGE NEGATIVE FUNCTIONS --------------------


        // -------------------------- [7] START OF IMAGE LOG FUNCTIONS--------------------

        $(document).on('click', "#log-brightness", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/log_brightness/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])


                }
            });
        });

        //--------------------------- END OF IMAGE LOG FUNCTIONS -------------------------



        // -------------------------- [8] START OF IMAGE POWER FUNCTIONS------------------

        // [8.1] POWER: POWER Box
        $(document).on('click', '#power-brightness', function(){

            // Remove the current power setting box
            $('#power-setting-box').remove()

            // Display new power setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="power-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Power transformation</span>
                            </div>
                            <div class="close">
                                <span>x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] Gamma value -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="skew-sections-titles">Gamma value</span>
                                </div>

                                <!-- Gamma value -->
                                <div class="col-md-12">
                                    <div class="form-group mb-12">
                                        <input id="gamma_value_input" type="number" step="0.1" value="1" class="form-control">
                                    </div>
                                </div>

                            </div>
                            <!-- [1] END OF BOX SIZE -->

                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_power_transformation">Apply</button>
                                </div>
                            </div>


                        </div>

                    </div>
                    
                `);

        });

        // [8.2] POWER: POWER Transformation
        $(document).on('click', "#apply_power_transformation", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Gamma value
            let gamma = $('#gamma_value_input').val();

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/power_brightness/",
                data: {
                    image_id :Image_id,
                    gamma :gamma,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])


                }
            });
        });

        //--------------------------- END OF IMAGE POWER FUNCTIONS -----------------------

        // -------------------------- [9] START OF IMAGE THRESHOLDING FUNCTIONS------------------
        
        // [9.1] THRESHOLDING: THRESHOLDING Box
        $(document).on('click', '#threshold-brightness', function(){

            // Remove the current power setting box
            $('#threshold-setting-box').remove()

            // Display new power setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="threshold-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Threshold</span>
                            </div>
                            <div class="close">
                                <span>x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] Threshold value -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="skew-sections-titles">Treshold value</span>
                                </div>

                                <!-- Threshold value -->
                                <div class="col-md-12">
                                    <div class="form-group mb-12">
                                        <input id="threshold_value_input" type="number" min="0" max="255" value="100" class="form-control">
                                    </div>
                                </div>

                            </div>
                            <!-- [1] END OF Threshold value -->

                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_threshold">Apply</button>
                                </div>
                            </div>


                        </div>

                    </div>
                    
                `);

        });
        
        // [9.2] THRESHOLDING: THRESHOLDING action
        $(document).on('click', "#apply_threshold", function(){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get threshold value
            let threshold = $('#threshold_value_input').val();

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/threshold_brightness/",
                data: {
                    image_id :Image_id,
                    threshold :threshold,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])


                }
            });
        });

        //--------------------------- [10] START OF IMAGE BITPLAN FUNCTIONS -----------------------

        // [10.1] BITPLAN: BITPLAN Box
        $(document).on('click', '#bitpLan-brightness', function(){

            // Remove the current power setting box
            $('#bitpLan-setting-box').remove()

            // Display new power setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="bitpLan-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Bit PLan</span>
                            </div>
                            <div class="close">
                                <span>x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] BitPlan value -->
                            <div>
                                <!-- Box size title -->
                                
                                <div class="select_box_label">
                                    <span style="text-align: left !important; color: #333 !important;">Choose Plan</span>
                                </div>
                                
                                <!-- Bit Plan value -->
                                <div>
                                    
                                    <div class="form-group mb-12">
                                        <!-- Blending Select Box -->
                                        <select class="select_bitplan_plan" id="select_bitplan_plan" required>
                                        </select>
                                    </div>
                                </div>

                            </div>
                            <!-- [1] END OF Threshold value -->

                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_bitpLan">Apply</button>
                                </div>
                            </div>


                        </div>

                    </div>
                    
                `);


                // Blending Persentage options
                for (var i = 1; i <= 8; i++){
                    $('#select_bitplan_plan').append(`<option value="${i}">Plan ${i}</option>`)
                }

        });

        // [10.2] BITPLAN: BITPLAN action
        $(document).on('click', "#apply_bitpLan", function(){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get threshold value
            let plan_no = $('#select_bitplan_plan').val();

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/bitplan_brightness/",
                data: {
                    image_id :Image_id,
                    plan_no :plan_no,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])


                }
            });
        });
        // -------------------------- END OF IMAGE BITPLAN FUNCTIONS------------------

        // -------------------------- [9] START OF IMAGE THRESHOLDING FUNCTIONS------------------

        // -------------------------- [9] START OF IMAGE CROP FUNCTIONS------------------

        // [9.1] GROP: CROP Box
        $(document).on('click', '#image-crop', function(){

            // Remove the current crop setting box
            $('#crop-setting-box').remove()

            // Remove the current crop box
            $('.image-crop-box').css('display', 'none');

            // Create new crop box
            $('.image-crop-box').fadeIn();

            // Reset the crop box
            $('.image-crop-box').css('left', 0 + 'px');
            $('.image-crop-box').css('top', 0 + 'px');

            // Display new crop setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="crop-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Crop</span>
                            </div>
                            <div class="close">
                                <span class="close_crop_box">x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] BOX SIZE -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="internal-sections-titles">Box size (px)</span>
                                </div>

                                <!-- Box width -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Width</label>
                                        <input class="internal-section-input form-control" id="crop-box-width" type="number" value="50">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Height</label>
                                        <input class="internal-section-input form-control" id="crop-box-height" type="number" value="50">
                                    </div>
                                </div>
                            </div>
                            <!-- [1] END OF BOX SIZE -->

                            <!-- [2] BOX POSITION -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="internal-sections-titles">Box position (px)</span>
                                </div>

                                <!-- Box top position -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Top</label>
                                        <input class="internal-section-input form-control" id="crop-box-top-position" type="number" value="0">
                                    </div>
                                </div>

                                <!-- Box left position -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Left</label>
                                        <input class="internal-section-input form-control" id="crop-box-left-position" type="number" value="0">
                                    </div>
                                </div>
                            </div>
                            <!-- [2] END OF BOX POSITION -->

                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_image_crop">Crop</button>
                                </div>
                            </div>


                        </div>

                    </div>
                    
                `);
        });
        
        // [9.2] GROP: change crop box width
        $(document).on('change', '#crop-box-width', function(){

            // Get width value
            let box = $(this).val() + 'px';

            // Change width
            $('.image-crop-box').css('width', box)

        });

        // [9.3] GROP: change crop box height
        $(document).on('change', '#crop-box-height', function(){

            // Get width value
            let box = $(this).val() + 'px';

            // Change width
            $('.image-crop-box').css('height', box)

        });

        // [9.4] GROP: change crop box top position
        $(document).on('change', '#crop-box-top-position', function(){

            // Get width value
            let box = $(this).val() + 'px';

            // Change width
            $('.image-crop-box').css('top', box)

        });

        // [9.5] GROP: change crop box left position
        $(document).on('change', '#crop-box-left-position', function(){

            // Get width value
            let box = $(this).val() + 'px';

            // Change width
            $('.image-crop-box').css('left', box)

        });

        // [9.6] CROP: APPLY CROP
        $(document).on('click', "#apply_image_crop", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Gamma value
            let width = $('#crop-box-width').val(),
                height = $('#crop-box-height').val(),
                top = $('#crop-box-top-position').val(),
                left = $('#crop-box-left-position').val();

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/image_crop/",
                data: {
                    image_id :Image_id,
                    width :width,
                    height :height,
                    top :top,
                    left :left,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                    // Reset the crop box
                    $('.image-crop-box').css('left', 0 + 'px')
                    $('.image-crop-box').css('top', 0 + 'px')

                }
            });
        });

        //--------------------------- END OF IMAGE CROP FUNCTIONS -----------------------


        // ------------------------- [10] START OF IMAGE ZOOM-IN FUNCTIONS-----------------
        
        // [10.1] ZOOM-IN: ZOOM Box
        $(document).on('click', '#image-zoom-in', function(){

            // Remove the current zoom setting box
            $('#zoom-setting-box').remove()

            // Remove the current zoom box
            $('.image-crop-box').css('display', 'none');

            // Create new crop box
            $('.image-crop-box').fadeIn();

            // Reset the crop box
            $('.image-crop-box').css('left', 0 + 'px');
            $('.image-crop-box').css('top', 0 + 'px');

            // Display new zoom setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="zoom-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Zoom in</span>
                            </div>
                            <div class="close">
                                <span class="close_crop_box">x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] BOX SIZE -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="internal-sections-titles">Box size (px)</span>
                                </div>

                                <!-- Box width -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Width</label>
                                        <input class="internal-section-input form-control" id="crop-box-width" type="number" value="50">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Height</label>
                                        <input class="internal-section-input form-control" id="crop-box-height" type="number" value="50">
                                    </div>
                                </div>
                            </div>
                            <!-- [1] END OF BOX SIZE -->

                            <!-- [2] BOX POSITION -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="internal-sections-titles">Box position (px)</span>
                                </div>

                                <!-- Box top position -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Top</label>
                                        <input class="internal-section-input form-control" id="crop-box-top-position" type="number" value="0">
                                    </div>
                                </div>

                                <!-- Box left position -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Left</label>
                                        <input class="internal-section-input form-control" id="crop-box-left-position" type="number" value="0">
                                    </div>
                                </div>
                            </div>
                            <!-- [2] END OF BOX POSITION -->

                            <!-- [3] Zooming scal -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="internal-sections-titles">Zooming scale</span>
                                </div>

                                <!-- Box top position -->
                                <div class="col-md-12">
                                    <div class="form-group mb-4">
                                        <!-- Blending Select Box -->
                                        <select class="select_zooming_scale" id="select_zooming_for_current_image" required>
                                        </select>
                                    </div>
                                </div>

                            </div>
                            <!-- [3] END OF BOX POSITION -->

                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_image_zoom_in">Zoom in</button>
                                </div>
                            </div>


                        </div>

                    </div>
                    
                `);

                // Blending Persentage options
                for (var i = 1; i <= 100; i++){
                    if (i == 1){
                        $('#select_zooming_for_current_image').append(`<option selected value="${i}">${i}X</option>`)
                    }else{
                        $('#select_zooming_for_current_image').append(`<option value="${i}">${i}X</option>`)
                    }
                }
                         
        });

        // [10.2] ZOOM-IN: ZOOM-IN Button
        $(document).on('click', "#apply_image_zoom_in", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Gamma value
            let width = $('#crop-box-width').val(),
                height = $('#crop-box-height').val(),
                top = $('#crop-box-top-position').val(),
                left = $('#crop-box-left-position').val(),
                sacle = $('#select_zooming_for_current_image').val();

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/image_zoom_in/",
                data: {
                    image_id :Image_id,
                    width :width,
                    height :height,
                    top :top,
                    left :left,
                    sacle :sacle,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                    // Reset the crop box
                    $('.image-crop-box').css('left', 0 + 'px')
                    $('.image-crop-box').css('top', 0 + 'px')

                }
            });
        });
        //-------------------------- END OF IMAGE ZOOM-IN FUNCTIONS -----------------------


        // ------------------------- [11] START OF IMAGE SELECT FUNCTIONS-----------------
        
        // [11.1] SELECT: SELECT BOX
        $(document).on('click', '#image-cut-select', function(){
            // Remove the current select setting box
            $('#select-setting-box').remove()

            /// Remove the current zoom box
            $('.image-crop-box').css('display', 'none');

            // Create new crop box
            $('.image-crop-box').fadeIn();

            // Reset the crop box
            $('.image-crop-box').css('left', 0 + 'px');
            $('.image-crop-box').css('top', 0 + 'px');
            $('.image-crop-box').css('width', 50 + 'px')
            $('.image-crop-box').css('height', 50 + 'px')

            // Display new select setting box
            $('body').append(`

                    <div class="effect-setting-panel" id="select-setting-box">
                        
                        <!-- Header -->
                        <div class="effect-setting-panel-header">
                            <div class="title">
                                <span>Select</span>
                            </div>
                            <div class="close">
                                <span class="close_crop_box">x</span>
                            </div>
                        </div>

                        <!-- Body -->
                        <div class="effect-setting-panel-body">
                            
                            <!-- [1] BOX SIZE -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="internal-sections-titles">Box size (px)</span>
                                </div>

                                <!-- Box width -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Width</label>
                                        <input class="internal-section-input form-control" id="crop-box-width" type="number" value="50">
                                    </div>
                                </div>

                                <!-- Box height -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Height</label>
                                        <input class="internal-section-input form-control" id="crop-box-height" type="number" value="50">
                                    </div>
                                </div>
                            </div>
                            <!-- [1] END OF BOX SIZE -->

                            <!-- [2] BOX POSITION -->
                            <div class="row">
                                <!-- Box size title -->
                                <div class="col-md-12">
                                    <span class="internal-sections-titles">Box position (px)</span>
                                </div>

                                <!-- Box top position -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Top</label>
                                        <input class="internal-section-input form-control" id="crop-box-top-position" type="number" value="0">
                                    </div>
                                </div>

                                <!-- Box left position -->
                                <div class="col-md-6">
                                    <div class="form-group mb-4">
                                        <label class="internal-section-label">Left</label>
                                        <input class="internal-section-input form-control" id="crop-box-left-position" type="number" value="0">
                                    </div>
                                </div>
                            </div>
                            <!-- [2] END OF BOX POSITION -->

                            <!-- Generate Button -->
                            <div class="row">
                                <div class="col-md-12">
                                    <button class="btn btn-dark btn-block" id="apply_cut_image_select">Select</button>
                                </div>
                            </div>


                        </div>

                    </div>
                    
                `);
        });
        
        // [11.2] SELECT: SELECT BUTTON
        $(document).on('click', '#apply_cut_image_select', function(){ 

            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get values
            let width = $('#crop-box-width').val(),
                height = $('#crop-box-height').val(),
                top = $('#crop-box-top-position').val(),
                left = $('#crop-box-left-position').val();


            $.ajax({
                type:"POST",
                url:"/image/image_cut_select/",
                data: {
                    image_id :Image_id,
                    width :width,
                    height :height,
                    top :top,
                    left :left,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])


                    // Reset the crop box
                    $('.image-crop-box').css('left', 0 + 'px')
                    $('.image-crop-box').css('top', 0 + 'px')
                    $('.image-crop-box').css('width', 0 + 'px')
                    $('.image-crop-box').css('height', 0 + 'px')

                    // Remove the current select setting box
                    $('#select-setting-box').remove()


                }
            });

        });

        // [11.3] SELECTED IMAGE: Rotate the seleced image
        $(document).on('click', '#selected-cut-image-rotate', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            $.ajax({
                type:"POST",
                url:"/image/image_cut_select_zoom_rotate/",
                data: {
                    image_id :Image_id,
                    rotation_angle: 90,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });

        // [11.4] SELECTED IMAGE: FLIP the seleced image 
        $(document).on('click', '#flip-cut-image', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            // Read the flip direction
            let flip_direction = $(this).attr('flip');

            $.ajax({
                type:"POST",
                url:"/image/image_cut_select_zoom_flip/",
                data: {
                    image_id :Image_id,
                    flip_direction: flip_direction,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });
        
        // [11.5] SELECTED IMAGE: AVARAGE Filter the seleced image 
        $(document).on('click', '#flip-cut-image', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            // Read the flip direction
            let flip_direction = $(this).attr('flip');

            $.ajax({
                type:"POST",
                url:"/image/image_cut_select_zoom_flip/",
                data: {
                    image_id :Image_id,
                    flip_direction: flip_direction,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });
        
        // [11.5] SELECTED IMAGE: AVARAGE Filter the seleced image 
        $(document).on('click', '#cut_image_select_avarage_filter', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            $.ajax({
                type:"POST",
                url:"/image/cut_image_select_avarage_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });

        // [11.6] SELECTED IMAGE: Gaussian Filter the seleced image 
        $(document).on('click', '#cut_image_select_gaussian_filter', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            $.ajax({
                type:"POST",
                url:"/image/cut_image_select_gaussian_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });

        // [11.6] SELECTED IMAGE: Circular Filter the seleced image 
        $(document).on('click', '#cut_image_select_circular_filter', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            $.ajax({
                type:"POST",
                url:"/image/cut_image_select_circular_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });

        // [11.6] SELECTED IMAGE: Cone Filter the seleced image 
        $(document).on('click', '#cut_image_select_cone_filter', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            $.ajax({
                type:"POST",
                url:"/image/cut_image_select_cone_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });

        // [11.6] SELECTED IMAGE: Pyrmadial Filter the seleced image 
        $(document).on('click', '#cut_image_select_pyrmadial_filter', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            $.ajax({
                type:"POST",
                url:"/image/cut_image_select_pyrmadial_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });

        // [11.6] SELECTED IMAGE: Median Filter the seleced image 
        $(document).on('click', '#cut_image_select_median_filter', function(){ 

            // Get image data
            let Image_id = $('.image-cut-select-canvas .image-container img').attr('image_id');

            $.ajax({
                type:"POST",
                url:"/image/cut_image_select_median_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    
                    console.log(data)

                    // Displa the sellection panal
                    $('.image-cut-select-canvas').fadeIn();

                    // Display the image
                    $('.image-cut-select-canvas .image-container img').attr('src', data['image_path'])
                    $('.image-cut-select-canvas .image-container img').attr('image_id', data['image_id'])

                }
            });

        });

        
        // [11.17] SELECTED IMAGE: SAVE EFFECT ON MAIN IMAGE
        $(document).on('click', "#apply_cut_selected_image_effects", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/apply_cut_selected_image_effects/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){

                    // Close the sellection panal
                    $('.image-cut-select-canvas').fadeOut();

                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])
                    
                    

                }
            });
        });

        // Close  the selection panal
        $(document).on('click', '#close-image-cut-select-canvas', function(){
            $('.image-cut-select-canvas').fadeOut();
        });

        //--------------------------- END OF IMAGE SELECT FUNCTIONS -----------------------

        // ================================== LPF: Image Filters ========================

        
        // ------------------------- [1] START OF IMAGE AVARAGE-FILTER FUNCTIONS----------------
        $(document).on('click', "#avarage-filter", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/avarage_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE AVARAGE-FILTER FUNCTIONS -----------------------

        // ------------------------- [2] START OF IMAGE GAUSSIAN-FILTER FUNCTIONS----------------
        $(document).on('click', "#gaussian-filter", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/gaussian_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE GAUSSIAN-FILTER FUNCTIONS -----------------------

        // ------------------------- [3] START OF IMAGE CIRCULAR-FILTER FUNCTIONS----------------
        $(document).on('click', "#circular-filter", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/circular_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE CIRCULAR-FILTER FUNCTIONS -----------------------

        // ------------------------- [4] START OF IMAGE CONE-FILTER FUNCTIONS----------------

        $(document).on('click', "#cone-filter", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/cone_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });

        //-------------------------- END OF IMAGE CONE-FILTER FUNCTIONS -----------------------

        // ------------------------- [5] START OF IMAGE PYRMADIAL-FILTER FUNCTIONS----------------
        $(document).on('click', "#pyrmadial-filter", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/pyrmadial_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE PYRMADIAL-FILTER FUNCTIONS -----------------------

        // ------------------------- [6] START OF IMAGE MEDIAN-FILTER FUNCTIONS----------------
        $(document).on('click', "#median-filter", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/median_filter/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE MEDIAN-FILTER FUNCTIONS -----------------------

        // ================================== HPF: Image Filters ========================

        // ------------------------- [1] START OF IMAGE V-EDGE FUNCTIONS----------------
        $(document).on('click', "#v-edgies", function(e){
            
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/v_edge/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE V-EDGE FUNCTIONS -----------------------

        // ------------------------- [2] START OF IMAGE H-EDGE FUNCTIONS----------------
        $(document).on('click', "#h-edgies", function(e){
                    
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/h_edge/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE H-EDGE FUNCTIONS -----------------------

        // ------------------------- [3] START OF IMAGE SOBEL-FILTER FUNCTIONS----------------
        $(document).on('click', "#sobel-edgies", function(e){
                    
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/sobel_edge/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE SOBEL-FILTER FUNCTIONS -----------------------

        // ------------------------- [4] START OF IMAGE LAPLACIAN-FILTER FUNCTIONS----------------
        $(document).on('click', "#laplacian-edgies", function(e){
                    
            // Get image data
            let Image_id = $('.current-work-image #current-image').attr('image_id');

            // Get Image Src
            $.ajax({
                type:"POST",
                url:"/image/laplacian_edge/",
                data: {
                    image_id :Image_id,
                    csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                },
                success:function(data){
                    $('.current-work-image #current-image').attr('image_id',data['image_id']);
                    $('.current-work-image #current-image').attr('src',data['image_path']);

                    $('#history-data-images').prepend(`

                            <!-- CARD IMAGE -->
                            <div class="history-card-image">
                                <img image_id="${data['image_id']}" src="${data['image_path']}">
                            </div>

                        `)

                    // Image Data
                    $(".current-image-details #image_width").html(data['current_image_width'])
                    $(".current-image-details #image_height").html(data['current_image_height'])
                    $(".current-image-details #image_min_intinisty").html(data['current_image_Min_intensity'])
                    $(".current-image-details #image_max_intinisty").html(data['current_image_Max_intensity'])

                    if(data['current_image_format'] == '1'){
                        $(".current-image-details #image_format").html('GRAY')
                    }else if(data['current_image_format'] == '2'){
                        $(".current-image-details #image_format").html('HSV')
                    }else{
                        $(".current-image-details #image_format").html('RGB')
                    }
                    
                    // Reset the sliders value
                    resetColorSliders(data['current_image_format'], data['Color_data'])

                }
            });
        });
        //-------------------------- END OF IMAGE LAPLACIAN-FILTER FUNCTIONS -----------------------


         // ------------------------- [4] START OF IMAGE OCR FUNCTIONS----------------
        $(document).on('click', "#OCR-detection", function(e){
                    
                    // Get image data
                    let Image_id = $('.current-work-image #current-image').attr('image_id');
        
                    // Get Image Src
                    $.ajax({
                        type:"POST",
                        url:"/image/ocr_text_detection/",
                        data: {
                            image_id :Image_id,
                            csrfmiddlewaretoken:$("input[name=csrfmiddlewaretoken]").val()
                        },
                        success:function(data){

                                 // Remove the current select setting box
                                $('#ocr-setting-box').remove()

                                // Display new select setting box
                                $('body').append(`

                                        <div class="effect-setting-panel" id="ocr-setting-box">
                                            
                                            <!-- Header -->
                                            <div class="effect-setting-panel-header">
                                                <div class="title">
                                                    <span>OCR</span>
                                                </div>
                                                <div class="close">
                                                    <span>x</span>
                                                </div>
                                            </div>

                                            <!-- Body -->
                                            <div class="effect-setting-panel-body">
                                                
                                                <!-- [1] BOX SIZE -->
                                                <div class="row">
                                                    <!-- Box size title -->
                                                    <div class="col-md-12">
                                                        <span class="internal-sections-titles">${data['text']}</span>
                                                    </div>

                                                </div>
                                                <!-- [1] END OF BOX SIZE -->

                                            </div>

                                        </div>
                                        
                                    `);


                        }
                    });
                });
        //-------------------------- END OF IMAGE OCR FUNCTIONS -----------------------

    </script>

{% endblock currentPageScripts %}